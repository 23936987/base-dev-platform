<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--#include file="/base/common.shtml"-->
    <script type="text/javascript">
        var dtd=$.Deferred();
        var wait=function(dtd){
            var tasks=function(){
                alert("执行完毕！");
                dtd.resolve();
            };
            setTimeout(tasks,5000);
            return dtd;
        };
        $.when(wait(dtd))
            .done(function(){alert("success");})
            .fail(function(){alert("error")});
    </script>
</head>
<body>

</body>
</html>