var _$=BDP={};function setLocalStorage(t,e){if(!window.localStorage)return alert("浏览器不支持localstorage"),!1;window.localStorage.setItem(t,e)}function getLocalStorage(t){return window.localStorage?window.localStorage.getItem(t):(alert("浏览器不支持localstorage"),!1)}function getTopWindow(){for(var t=window;t.parent!=t&&isNotEmpty(t.parent.CC);)t=t.parent;return t}$.extend($,{bdp:BDP}),$.extend(_$,{parseInt:function(t){var e=parseInt(t);return isNaN(e)?0:e},parseFloat:function(t){var e=parseFloat(t);return isNaN(e)?0:e}}),$.extend(_$,{getTarget:function(t){return t.nodeType?$(t):isString(t)?$(t):t},getFunctoin:function(t,e){return e?e[t]:window[t]},css:function(t,e){for(var n=e.toLowerCase().split(";"),i=0,r=n.length;i<r;i++){var a=n[i].split(":");if(1<a.length)if(2<a.length){var o=a[0].trim();a.removeAt(0);var s=a.join(":").trim();t.css(o,s)}else t.css(a[0].trim(),a[1].trim())}}}),$.extend(_$,{extend:function(){var t,e,n,i;if(t=arguments[0],e=arguments[1],3==arguments.length)i=arguments[2],n=[];else{if(4!=arguments.length)return void alert("继承方法参数不对");n=arguments[2],i=arguments[3]}var r=t.prototype,a=e.prototype;if(t.superclass!=a){for(var o in t.superclass=a,t.superclass.constructor=e,a)r[o]=a[o];if(null!=n&&0<n.length)for(var s=0;s<n.length;s++){var l=n[s],u=l.interfaceName,d=l.prototype;if(t[u]=d)for(var c in d)r[c]=d[c]}if(i)for(var f in i)r[f]=i[f];return t}},implements:function(){var t,e,n;if(2==arguments.length)n=arguments[1],e=[];else{if(3!=arguments.length)return void alert("继承方法参数不对");e=arguments[1],n=arguments[2]}var i=(t=arguments[0]).prototype;if(null!=e&&0<e.length)for(var r=0;r<e.length;r++){var a=e[r],o=a.interfaceName,s=a.prototype;if(t[o]=s)for(var l in s)i[l]=s[l]}if(n)for(var u in n)i[u]=n[u];return t}}),$.extend(_$,{components:{},uids:{},classes:{},_clsPre:"cc-",_uiPreCls:"ui-",_RESOURCE_PATH_:"/lib/cc",reg:function(t){if(null!==t&&t.isComponent){var e=t.id,n=t.uid,i=_$.components[e];null!=i?i.uid!=t.uid&&(delete _$.components[i.id],delete _$.uids[i.uid],_$.components[e]=t,_$.uids[n]=t):(_$.components[e]=t,_$.uids[n]=t)}},unReg:function(t){if(null!==t&&t.isComponent){var e=t.id,n=t.uid;delete _$.components[e],delete _$.uids[n]}},getById:function(t){var e=_$.components[t];return isEmpty(e)?null:e},getByUId:function(t){var e=_$.uids[t];return isEmpty(e)?null:e},regClass:function(t,e){_$.parser.plugins.add(t),_$.classes[t]||(e.prototype.type=t,_$.classes[t]=e)},getClass:function(t){var e=_$.classes[t];return isEmpty(e)?null:e},findControls:function(t){null===t&&(t=$("body"));var e=$("[class^='"+this._uiPreCls+"']",t),i=[];return e.each(function(t){var e=$(this),n=e.attr("componentId");(e=_$.getByUId(n))&&i.add(e)}),i}}),$.extend(_$,{cssLoaded:{},jsLoaded:{},_LOADING_:"loading",_SUCCESES_:"success",_WAIT_:5,_suffix:function(t){var e=t.lastIndexOf(".");return t.substr(e+1)},getKeys:function(t){var e=[];for(var n in t)e.add(n);return e},isJsDepsLoad:function(t){var n=this;return t.every(function(t){var e=n.jsLoaded[t];return null!=e&&e!=n._LOADING_})},isCssDepsLoad:function(t){var n=this;return t.every(function(t){var e=n.cssLoaded[t];return null!=e&&e!=n._LOADING_})},_loadCssAndJs:function(d,c){var f=this,t=f.getKeys(d);if(null!=t&&0<t.length){var _=t.length,p=0;t.each(function(e){var n=d[e],t="",i=[];isString(n)?t=n:(t=n.url,i=n.deps);var r=f._suffix(t);if("js"==r){if(null==(l=f.jsLoaded[e])){function a(){f._loadJs(e,t,function(){++p==_&&c.call(window)})}if(null==i||0==i.length)a();else if(f.isJsDepsLoad(i))a();else var o=setInterval(function(){if(f.isJsDepsLoad(i)){clearInterval(o);var t={};t[e]=n,f._loadCssAndJs(t,function(){++p==_&&c.call(window)})}},f._WAIT_)}else if(null!=l&&l==f._SUCCESES_)++p==_&&c.call(window);else if(null!=l&&l==f._LOADING_)var s=setInterval(function(){f.isJsDepsLoad([e])&&(clearInterval(s),++p==_&&c.call(window))},f._WAIT_)}else if("css"==r){var l;if(null==(l=f.cssLoaded[e]))f._loadCss(e,t,function(){++p==_&&c.call(window)});else if(null!=l&&l==f._SUCCESES_)++p==_&&c.call(window);else if(null!=l&&l==f._LOADING_)var u=setInterval(function(){f.isCssDepsLoad([e])&&(clearInterval(u),++p==_&&c.call(window))},f._WAIT_)}})}else c.call(window)},_loadJs:function(t,e,n){var i=this;i.jsLoaded[t]=i._LOADING_;var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.src=e,document.getElementsByTagName("head")[0].appendChild(r),r.onload=r.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i.jsLoaded[t]=i._SUCCESES_,n.call(window))}},_loadCss:function(t,e,n){var i=this;i.cssLoaded[t]=i._LOADING_;var r=document.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.href=e,document.getElementsByTagName("head")[0].appendChild(r),r.onload=r.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i.cssLoaded[t]=i._SUCCESES_,n.call(window))}}}),$.extend(_$,{parser:{parseOptions:function(target,properties){var options={},s=$.trim(target.attr("data-options"));if(s&&("{"!=s.substring(0,1)&&(s="{"+s+"}"),options=new Function("return "+s)()),$.map(["width","height","minWidth","maxWidth","minHeight","maxHeight"],function(t){var e=$.trim(target[0].style[t]||"");e&&(-1==e.indexOf("%")&&(e=parseInt(e),isNaN(e)&&(e=void 0)),options[t]=e)}),properties){for(var opts={},i=0;i<properties.length;i++){var pp=properties[i];if("string"==typeof pp)opts[pp]=target.attr(pp);else for(var name in pp){var type=pp[name];if("boolean"==type&&isNotEmpty(target.attr(name))){var val=target[0].getAttribute(name);opts[name]=!!val&&"true"==val}else if("number"==type&&isNotEmpty(target.attr(name)))opts[name]="0"==target.attr(name)?0:parseFloat(target.attr(name));else if("json"==type){var s=$.trim(target.attr(name));s?("{"!=s.substring(0,1)&&(s="{"+s+"}"),options[name]=new Function("return "+s)()):options[name]={}}else if("function"==type){var s=$.trim(target.attr(name));if(isNotEmpty(s)){var func=_$.getFunctoin(s);options[name]=func}}else if("object"==type){var s=$.trim(target.attr(name));s&&(options[name]=eval("("+s+")"))}}}$.extend(options,opts)}return options},processList:{},plugins:[],getProgress:function(t){return this.processList[t]},setProgress:function(t,e){this.processList[t]=e},onComponentComplete:function(t){if(null!=t){var e=t.id,n=t.processKey,i=_$.parser.getProgress(n);null==i||i._IS_COMPLETE||(i.ids.remove(e),0===i.ids.length&&(i._IS_COMPLETE=!0,logger("***控件解析完成"),i.onComplete.call(window)))}},parse:function(){var t=$("body"),e=function(t){};1==arguments.length?isFunction(arguments[0])?e=arguments[0]:(t=arguments[0],isString(t)?t=$(t):t.nodeType&&(t=$(t))):2==arguments.length&&(t=arguments[0],e=arguments[1],isString(t)?t=$(t):t.nodeType&&(t=$(t)));var n=uuid();new _$.parser.parseComponent(n,t,e)},parseComponent:function(n,t,e){_$.parser.setProgress(n,this);var i=this;if(i._IS_COMPLETE=!1,i.count=0,i.ids=[],i.onComplete=e,!isEmpty(t)||0!=t.size()){for(var r={},a=0;a<_$.parser.plugins.length;a++){var o=_$.parser.plugins[a],s=$("."+_$._clsPre+o,t);s.each(function(t){var e=$(this).attr("id");i.count++,i.ids.add(e)}),r[o]=s}if(0===i.count)return i._IS_COMPLETE=!0,void i.onComplete.call(window,n);for(var l in r){var u=r[l];0!==u.size()&&null!==u&&0<u.size()&&u.each(function(){var t=$(this),e=_$.getClass(l);null!==e&&new e(t,n)})}}}}}),_$.Component=function(t,e){var n=this;n.processKey=e,t=_$.getTarget(t),n.events={},n.el=t,n.uid=uuid(),n.id=t.attr("id");var i=n._attrOpts(),r=n._attrProps();n.options=$.extend(!0,i,_$.parser.parseOptions(t,r)),_$.reg(n);var a=n._require();n._getEvents.call(n,["onloadsuccess"]),_$._loadCssAndJs(a,function(){n._create()})},$.extend(_$,{validator:{execute:function(t,e,n,i,r){var a=r.type,o=isEmpty(r.msg)?this.messages[a]:r.msg,s={value:n,id:t,name:e,nameCn:i,ruleValue:r.value,validMsg:o};return this.methods[a].call(null,s)},addMethod:function(t,e,n){_$.validator.methods[t]=e,_$.validator.messages[t]=n},messages:{required:"[{0}]必填",email:"[{0}]必须是有效的电子邮件地址",password:"[{0}]必须由6-20位字母数字组成",mobile:"[{0}]必须是有效的手机号",tel:"[{0}]必须是有效的座机号",url:"[{0}]必须是有效的网址",account:"[{0}]必须是由6-10位字母和数字组成",money:"[{0}]必须是有效的金钱格式",number:"[{0}]必须是数字",integer:"[{0}]必须是正整数",positive:"[{0}]必须是整数",natural:"[{0}]必须是自然数",min:"[{0}]必须大于{1}",minEq:"[{0}]必须大于等于{1}",max:"[{0}]必须小于{1}",maxEq:"[{0}]必须小于等于{1}",minLength:"[{0}]必须大于{1}个字符",maxLength:"[{0}]必须小于{1}个字符",minLengthEq:"[{0}]必须大于等于{1}个字符",maxLengthEq:"[{0}]必须小于等于{1}个字符",rangeLength:"[{0}]长度必须是大{1},小于{2}",rangeLengthEq:"[{0}]长度必须是大于{1},小于等于{2}",range:"[{0}]必须大于{1},小于{2}",rangeEq:"[{0}]必须是大于等于{1},小于等于{2}",equalTo:"[{0}]必须等于[{1}] ",greaterThan:"[{0}]必须大于[{1}] ",greaterEqThan:"[{0}]必须大于等于[{1}] ",lessThan:"[{0}]必须大于[{1}] ",lessEqThan:"[{0}]必须大于[{1}] "},format:function(n,t){var e=this;return 1===arguments.length?function(){var t=$.makeArray(arguments);return t.unshift(n),e.format.apply(this,t)}:(2<arguments.length&&t.constructor!==Array&&(t=$.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),$.each(t,function(t,e){n=n.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})}),n)},zeroHandler:function(t,e,n,i){var r=t.value,a=t.nameCn,o=t.validMsg,s=!0,l="";return isEmpty(r)&&"required"!=i?s=!0:e.call(null,r)||(s=!1,isEmpty(n)&&(n=[a]),l=_$.validator.format(o,n)),{state:s,info:l}},oneHandler:function(t,e){var n=t.value,i=t.nameCn,r=t.ruleValue,a=t.validMsg,o=!0,s="";if(isEmpty(n))o=!0;else if(!e.call(null,n,r)){o=!1;var l=[i,r];s=_$.validator.format(a,l)}return{state:o,info:s}},twoHandler:function(t,e){var n=t.value,i=t.nameCn,r=t.ruleValue,a=t.validMsg,o=!0,s="";if(isEmpty(n))o=!0;else{var l=r.split(","),u=l[0],d=l[1];if(!e.call(null,n,u,d)){o=!1;var c=[i,u,d];s=_$.validator.format(a,c)}}return{state:o,info:s}},compareTo:function(t,e,n){if(isNotEmpty(n)){var i=parseDate(t,n).getTime(),r=parseDate(e,n).getTime();return i==r?0:i<r?-1:1}return t==e?0:t<e?-1:1},methods:{required:function(t){return _$.validator.zeroHandler(t,function(t){return isNotEmpty(t)},null,"required")},email:function(t){return _$.validator.zeroHandler(t,function(t){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)})},password:function(t){return _$.validator.zeroHandler(t,function(t){return/^[A-Za-z0-9]{6,20}$/.test(t)})},mobile:function(t){return _$.validator.zeroHandler(t,function(t){return/^1\d{10}$/.test(t)})},tel:function(t){return _$.validator.zeroHandler(t,function(t){return/^0\d{2,3}-?\d{7,8}$/.test(t)})},url:function(t){return _$.validator.zeroHandler(t,function(t){return/^((https|http|ftp|rtsp|mms)?:\/\/)+[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/.test(t)})},account:function(t){return _$.validator.zeroHandler(t,function(t){return/^[a-z0-9A-z]\w{5,9}$/.test(t)})},money:function(t){return _$.validator.zeroHandler(t,function(t){return/(^-?[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/.test(t)})},number:function(t){return _$.validator.zeroHandler(t,function(t){return/^(\-|\+)?\d+(\.\d+)?$/.test(t)})},integer:function(t){return _$.validator.zeroHandler(t,function(t){return/^[1-9]\d*$/.test(t)})},positive:function(t){return _$.validator.zeroHandler(t,function(t){return/^-?\d+$/.test(t)})},natural:function(t){return _$.validator.zeroHandler(t,function(t){return/^\d+$/.test(t)})},min:function(t){return _$.validator.oneHandler(t,function(t,e){return!isNaN(t)&&e<(t=parseFloat(t))})},minEq:function(t){return _$.validator.oneHandler(t,function(t,e){return!isNaN(t)&&e<=(t=parseFloat(t))})},max:function(t){return _$.validator.oneHandler(t,function(t,e){return!isNaN(t)&&(t=parseFloat(t))<e})},maxEq:function(t){return _$.validator.oneHandler(t,function(t,e){return!isNaN(t)&&(t=parseFloat(t))<=e})},minLength:function(t){return _$.validator.oneHandler(t,function(t,e){return!((t+"").trim().length<=e)})},maxLength:function(t){return _$.validator.oneHandler(t,function(t,e){return!((t+"").trim().length>=e)})},minLengthEq:function(t){return _$.validator.oneHandler(t,function(t,e){return!((t+"").trim().length<e)})},maxLengthEq:function(t){return _$.validator.oneHandler(t,function(t,e){return!((t+"").trim().length>e)})},rangeLength:function(t){return _$.validator.twoHandler(t,function(t,e,n){var i=(t+"").trim();return i.length<n&&i.length>e})},rangeLengthEq:function(t){return _$.validator.twoHandler(t,function(t,e,n){var i=(t+"").trim();return i.length<=n&&i.length>=e})},range:function(t){return _$.validator.twoHandler(t,function(t,e,n){return!isNaN(t)&&!((t=parseFloat(t))<n&&e<t)})},rangeEq:function(t){return _$.validator.twoHandler(t,function(t,e,n){return!isNaN(t)&&((t=parseFloat(t))<=n&&e<=t)})},greaterEqThan:function(t){var e=t.ruleValue.split(",");if(1==e.length){var n=e[0],i=(a=_$.getById(n)).getValue(),r=[t.nameCn,a.getOption("nameCn")];return _$.validator.zeroHandler(t,function(t){return 0<=_$.validator.compareTo(t,i)},r)}if(2==e.length){n=e[0];var a,o=e[1];i=(a=_$.getById(n)).getValue(),r=[t.nameCn,a.getOption("nameCn")];return _$.validator.zeroHandler(t,function(t){return 0<=_$.validator.compareTo(t,i,o)},r)}},greaterThan:function(t){var e=t.ruleValue.split(",");if(1==e.length){var n=e[0],i=(a=_$.getById(n)).getValue(),r=[t.nameCn,a.getOption("nameCn")];return _$.validator.zeroHandler(t,function(t){return 0<_$.validator.compareTo(t,i)},r)}if(2==e.length){n=e[0];var a,o=e[1];i=(a=_$.getById(n)).getValue(),r=[t.nameCn,a.getOption("nameCn")];return _$.validator.zeroHandler(t,function(t){return 0<_$.validator.compareTo(t,i,o)},r)}},equalTo:function(t){var e=t.ruleValue.split(",")[0],n=_$.getById(e),i=n.getValue(),r=[t.nameCn,n.getOption("nameCn")];return _$.validator.zeroHandler(t,function(t){return 0==_$.validator.compareTo(t,i)},r)}}}}),_$.Component.prototype={el:null,isComponent:!0,id:"",uid:"",component:null,_cls:_$._clsPre+"component",_uiCls:_$._uiPreCls+"component",_LOADING_:"loading",_LOAD_SUCCESS_:"success",_LOADING_:"loading",_LOAD_:"loading",_require:function(){return{}},getStatus:function(){return this._LOAD_},isLoaded:function(){return this._LOAD_==this._LOAD_SUCCESS_},_create:function(){},_attrProps:function(){return["id","remark","onloadsuccess",{plugins:"object"}]},_attrOpts:function(){return{onloadsuccess:function(){},plugins:{}}},_setStyle:function(){},_getEvents:function(t){var n=this;$.map(t,function(t){var e=n.getOption(t);isNotEmpty(e)&&(e=_$.getFunctoin(e),n._on(t,e))})},_loadSuccess:function(){var t=this;t.isLoaded()||(t._LOAD_=t._LOAD_SUCCESS_,_$.parser.onComponentComplete.call(_$.parser,t)),t._fire("onloadsuccess")},_loadSuccessNoEvent:function(){this.isLoaded()||(this._LOAD_=this._LOAD_SUCCESS_,_$.parser.onComponentComplete.call(_$.parser,this))},_bindEvents:function(){},_fire:function(t,e){var n=this;for(var i in t=t.toLowerCase(),n.events)if(i==t){var r=n.events[i];n._fireByEvent(r,i,e)}else if(-1!=i.indexOf(".")){if(i.split(".")[1]==t){r=n.events[i];n._fireByEvent(r,i,e)}}},_fireByEvent:function(t,e,n){var i=this;if(t){(n=n||{})&&n!=i&&(n.source=i,n.type||(n.type=e),n.name=i.name||i.name,n.id=i.id,n.name=i.id,n.source=i);for(var r=0,a=t.length;r<a;r++){var o=t[r];o&&o[0].apply(o[1],[n])}}},_on:function(t,e,n){var i=this;if("string"==typeof e){var r=_$.getFunctoin(e,n);r&&(e=r)}if("function"!=typeof e||!t)return!1;t=t.toLowerCase();var a=i.events[t];return a=a||(i.events[t]=[]),n=n||i,i._findListener(t,e,n)||(a.push([e,n]),i.events[t]=a),i},_unPrefix:function(t){for(var e in this.events){if(-1!=e.indexOf("."))e.split(".")[0]==t&&delete this.events[e]}},_un:function(t,e,n){if("function"!=typeof e)return!1;t=t.toLowerCase();var i=this.events[t];if(i){n=n||this;var r=this._findListener(t,e,n);r&&i.remove(r)}return this},_findListener:function(t,e,n){t=t.toLowerCase(),n=n||this;var i=this.events[t];if(i)for(var r=0;r<i.length;r++){var a=i[r];if(a[0]==e&&a[1]==n)return a}},_replaceNode:function(t){var e=this,n=Handlebars.compile(t)(e.options),i=$(n);e.el.replaceWith(i),e.el=i,e.el.addClass(e._uiCls),e.el.attr("componentId",e.uid)},setOption:function(t,e){this.options[t]=e},getOption:function(t){return this.options[t]},toString:function(){return this.id},destroy:function(){this.el.remove(),_$.unReg(this)}},_$.Form=function(t,e){t=_$.getTarget(t);this.el=t,this.formId=e;this.options=$.extend(!0,{})},_$.Form.prototype={validState:!0,clear:function(){var t=this.getFields(this.el);if(null!==t&&0<t.length)for(var e=0;e<t.length;e++){var n=t[e];n&&n.setValue(null)}},reset:function(){var t=this.getFields(this.el);if(null!==t&&0<t.length)for(var e=0;e<t.length;e++){var n=t[e];n&&n.reset()}},setValue:function(t){for(var e=this.getFields(this.el),n=0;n<e.length;n++){var i=e[n];if(null!=i){var r=i.getOption("name")||i.id;if(t.hasOwnProperty(r)){var a=t[r];i.orgiValue=a,a=i.getOption("setValueFormat").call(window,t,a,i.id),this.formId&&i.setFormData(t,this.formId),i.setValue(a)}}}},setValueNoChange:function(t,e){isEmpty(e)&&(e={});for(var n=this.getFields(this.el),i=0;i<n.length;i++){var r=n[i];if(null!=r){var a=r.getOption("name")||r.id;if(t.hasOwnProperty(a)){var o=t[a];r.orgiValue=o,o=r.getOption("setValueFormat").call(window,t,o),this.formId&&r.setFormData(t,this.formId),e[a]?r.setValue(o):r.setValue(o,!1)}}}},getValue:function(){for(var t=this.getFields(this.el),e={},n=0;n<t.length;n++){var i=t[n];if(null!==i)if(i.getOption("returnValue")){var r=i.getValue();if(isNotEmpty(r))e[i.getOption("name")||i.id]=r}}return e},getEditData:function(){for(var t=this.getFields(this.el),e={},n=0;n<t.length;n++){var i=t[n];null!==i&&i.getEditValue(e)}return e},getAddData:function(){var t={},e=this.getValue();for(var n in e){var i=e[n];isNotEmpty(i)&&(t[n]=i)}return t},getQueryData:function(){for(var t=this.getFields(this.el),e={},n=0;n<t.length;n++){var i=t[n],r=i.id;if(-1==(r+"").indexOf("_type")&&null!=i){var a=i.getValue();if(isNotEmpty(a)){e[i.getOption("name")||r]=a;var o=i.getOption("qtype"),s=(o=o||r)+"_type",l=_$.getById(s);if(null!=l){var u=l.getValue();if(isNotEmpty(u))e[l.getOption("name")]=u}}}}return e},getFields:function(){for(var t=_$.findControls(this.el),e=[],n=0;n<t.length;n++){var i=t[n];i.isFormItem&&e.add(i)}return e},setValid:function(t){this.validState=t;for(var e=this.getFields(),n=0;n<e.length;n++){e[n].setValid(t)}},isValid:function(t){var e=this;$("#validDiv").empty(),t=t||!1,e.validState=!0;for(var n=e.getFields(),i=0;i<n.length;i++){var r=n[i].isValid(t);e.validState&&!r&&(e.validState=r)}return e.validState}};var _EDITABLE_=1,_SHOW_=0;_$.FormItem=function(t,e){_$.FormItem.superclass.constructor.call(this,t,e)},_$.extend(_$.FormItem,_$.Component,{isFormItem:!0,formData:{},value:null,orgiValue:null,_uiCls:_$._uiPreCls+"FormItem",_cls:_$._clsPre+"formItem",_spanCls:_$._uiPreCls+"span",validState:!0,initialization:!1,setFormData:function(t,e){this.formData[e]=t},getFormData:function(t){return this.formData[t]},errMsg:[],_create:function(){var t=this;t._isEdit()?t._editModel():t._showModel(),t.initialization=!0,t.el.attr("formId",t.id)},_editModel:function(){},getUserData:function(){return this.getOption("userData")},_showModel:function(t){isEmpty(t)&&(t=!0);var e=this;e.setOption("model",_SHOW_),e._clearEdit();e._replaceNode('<div class="showDiv"></div>'),e.el.addClass(e._spanCls),e.el.addClass("FormItem"),e.component=$(".showDiv",e.el),e._bindChangeEvents(),t?e._init():e._initSetModel()},_initSetModel:function(){isNotEmpty(this.value)&&this.setValue(this.value,!1)},_clearShow:function(){this.component&&this.component.remove()},selectText:function(t){var e=(t.val()+"").length,n=t[0];if(-1<navigator.userAgent.indexOf("MSIE")){document.selection.createRange();var i=n.createTextRange();i.moveStart("character",e),i.collapse(),i.select()}else n.setSelectionRange(0,e)},_elHeight:function(){var t=this.getOption("height");if(isNotEmpty(t)){var e=$(".form_item_valid",this.el).height()+$(".form_item_memo",this.el).height()+t;this.el.height(e)}},_setStyle:function(){var t=this.getOption("width");isNotEmpty(t)&&this.el.width(t),this._elHeight()},setWidth:function(t){isNotEmpty(t)&&this.el.width(t)},_clearEdit:function(){this.component&&(this.component.unbind(),this.component.remove())},_init:function(){var t=this.options.initValue;isNotEmpty(t)&&(this.setValue(t),this.orgiValue=t),this._loadSuccess()},_attrProps:function(){var t=_$.FormItem.superclass._attrProps.call(this);return t.addAll(["name","onchange","initValue","nameCn","required-msg","qtype",{required:"boolean",immediately:"boolean",model:"number",validRules:"json",userData:"json",setValueFormat:"function",returnValue:"boolean"}]),t},_attrOpts:function(){var t=_$.FormItem.superclass._attrOpts.call(this);return $.extend(!0,t,{model:1,returnValue:!0,immediately:!1,setValueFormat:function(t,e){return e}})},_isEdit:function(){return this.options.model==_EDITABLE_},_sync:function(){this.value=this.component.val()},_validateItem:function(t){var e=this.getValue(),n=this.getOption("nameCn"),i=this.id,r=this.getOption("name");return _$.validator.execute(i,r,e,n,t)},_showErrMsg:function(){$(".form_item_valid",this.el).html(this.errMsg.join(",")),$("#validDiv").append(this.errMsg.join(",")),this._elHeight()},_replaceNode:function(t){var e=this,n='<div id="{{id}}" >'+t+'<div class="form_item_valid"></div><div class="form_item_memo">{{remark}}</div><div style="clear:both;"></div></div>';n=e._isEdit()?'<div id="{{id}}" >'+t+'<div class="form_item_valid"></div><div class="form_item_memo">{{remark}}</div><div style="clear:both;"></div></div>':'<div id="{{id}}" >'+t+"</div>";var i=Handlebars.compile(n)(e.options),r=$(i);e.el.replaceWith(r),e.el=r,e.el.addClass(e._uiCls),e.el.addClass("FormItem"),e.el.attr("componentId",e.uid)},reset:function(){this.setValue(this.orgiValue)},setValue:function(t,e){isEmpty(e)&&(e=!0);var n=this;if(isEmpty(t)?(n.value=null,n._isEdit()?n.component.val(""):n.component.html("")):(n.value=t,n._isEdit()?n.component.val(t):n.component.html(t)),e){var i={};i.value=n.getValue(),n._fire("onchange",i)}},getValue:function(){return this.value},setValid:function(t){this.validState=t,this.validState&&(this.errMsg=[]),this._showErrMsg()},validate:function(t){var r=this,a=!0,o=[];return isNotEmpty(t)&&0<=t.length&&t.each(function(t){var e=r._validateItem(t),n=e.state,i=e.info;a&&!n&&(a=n,o.add(i))}),{flag:a,errMsg:o}},isValid:function(t){var e=this;if(!e._isEdit()||!t&&!e.el.is(":visible"))return!0;var n=e.getOption("validRules"),i=(e.getOption("nameCn"),e.getOption("required"));e.getOption("required-msg");if(n){var r=[];if(1==i){var a={type:"required"};a.value=n.required,a.msg=n["required-msg"],r.add(a)}for(var o in n)if(!o.endWith("msg")){var s={};s.type=o,s.value=n[o],s.msg=n[o+"-msg"],r.add(s)}var l=e.validate(r),u=l.flag;return e.errMsg=l.errMsg,e.setValid(u),u}return!0},getEditValue:function(t){var e=this.orgiValue,n=this.getValue(),i=this.id;isEmpty(e)&&isNotEmpty(n)?t[i]=n:isNotEmpty(e)&&isEmpty(n)?t[i]=null:isNotEmpty(e)&&isNotEmpty(n)&&e!=n&&(t[i]=n)},setModel:function(t){this.options.model==_SHOW_&&t==_EDITABLE_?this._editModel(!1):this.options.model==_EDITABLE_&&t==_SHOW_&&this._showModel(!1)},_bindChangeEvents:function(){_$.FormItem.superclass._getEvents.call(this,["onchange"])},_bindEvents:function(){this._bindChangeEvents()},destroy:function(){this._isEdit()?this._clearEdit():this._clearShow(),_$.FormItem.superclass.destroy.call(this)}}),_$.Text=function(t,e){_$.Text.superclass.constructor.call(this,t,e)},_$.regClass("Text",_$.Text),_$.extend(_$.Text,_$.FormItem,{_cls:_$._clsPre+"Text",_uiCls:_$._uiPreCls+"Text",_attrProps:function(){var t=_$.Text.superclass._attrProps.call(this);return t.addAll(["onfocus","oninput","onblur","inputStyle","type"]),t},_attrOpts:function(){var t=_$.Text.superclass._attrOpts.call(this);return $.extend(!0,t,{type:"text"})},_editModel:function(t){var e=this;isEmpty(t)&&(t=!0),e.setOption("model",_EDITABLE_),e._clearShow();e._replaceNode('<input type="{{type}}" class="Text"/>'),e.component=$(".Text",e.el),e._setStyle(),e._bindEvents(),t?e._init():e._initSetModel()},_bindEvents:function(){var e=this;if(_$.Text.superclass._bindEvents.call(e),_$.Text.superclass._getEvents.call(e,["onfocus","oninput","onblur"]),e._isEdit()){var n={};n.value=e.getValue(),e.component.bind("focus",function(t){e._focusHandler(n)}),e.component.bind("input propertychange",function(){e._inputHandler(n)}),e.component.bind("blur",function(){e._blurHandler(n)})}},_blurHandler:function(t){this.getOption("immediately")&&this.isValid(!1),this._fire("onblur",t),this._fire("onchange",t)},_inputHandler:function(t){this._fire("oninput",t)},_focusHandler:function(t){this._fire("onfocus",t)},_setStyle:function(){var t=this;_$.Text.superclass._setStyle.call(t);var e=t.getOption("height");e&&t.component.height(e);var n=t.getOption("inputStyle");isNotEmpty(n)&&_$.css(t.component,n)},getValue:function(){return this._isEdit()&&this._sync(),this.value}});