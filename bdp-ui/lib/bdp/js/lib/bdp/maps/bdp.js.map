{"version":3,"sources":["bdp.js"],"names":["_$","BDP","setLocalStorage","key","value","window","localStorage","alert","setItem","getLocalStorage","getItem","getTopWindow","topWin","parent","isNotEmpty","CC","$","extend","bdp","basePath","parseInt","str","res","isNaN","parseFloat","getTarget","target","nodeType","isString","getFunctoin","fn","scope","css","a","j","toLowerCase","split","f","d","length","m","h","trim","removeAt","g","join","extendCommon","childClass","parentClass","interfaces","props","childProps","prototype","parentProps","i","func","interfaceName","interfaceProps","key2","key1","arguments","superclass","constructor","extendLoad","parentClassName","getClass","_loadCssAndJs","implements","components","uids","classes","_clsPre","_uiPreCls","reg","obj","isComponent","id","uid","old","unReg","getById","isEmpty","getByUId","regClass","pluginName","type","regPlugins","arr","parser","plugins","addAll","findControls","context","list","this","items","each","e","attr","add","cssLoaded","jsLoaded","_LOADING_","_SUCCESES_","_WAIT_","_suffix","url","index","lastIndexOf","substr","getKeys","urls","keys","isJsDepsLoad","files","_this","every","file","loadState","isCssDepsLoad","count","deps","suffix","loadJs","_loadJs","call","timer","setInterval","clearInterval","depUrl","time1","_loadCss","time2","script","document","createElement","setAttribute","src","getElementsByTagName","appendChild","onload","onreadystatechange","readyState","href","parseOptions","properties","options","s","substring","Function","map","p","pv","style","indexOf","undefined","opts","pp","name","val","getAttribute","eval","processList","getProgress","processKey","setProgress","onComponentComplete","component","process","_IS_COMPLETE","ids","remove","logger","onComplete","parse","callback","isFunction","uuid","parseComponent","size","componentName","list1","Func","job1","Component","events","el","_attrOpts","_attrProps","_require","_getEvents","_create","_cls","_uiCls","_LOAD_SUCCESS_","_LOAD_","getStatus","isLoaded","onloadsuccess","_setStyle","getOption","_on","_loadSuccess","_fire","_loadSuccessNoEvent","_bindEvents","eventKey","event","_fireByEvent","source","c","item","apply","_findListener","push","_unPrefix","prefix","_un","_replaceNode","result","Handlebars","compile","template","element","replaceWith","addClass","setOption","toString","destroy","validator","execute","nameCn","rule","dtd","Deferred","validMsg","messages","ruleValue","handler","methods","params","when","done","resolve","fail","err","reject","promise","addMethod","msg","format","args","makeArray","unshift","Array","slice","n","replace","RegExp","zeroHandler","names","state","info","oneHandler","param","twoHandler","param1","param2","compareTo","val1","val2","date1","parseDate","getTime","date2","flag","test","num","min","max","valueTo","objTo","getValue","Form","formId","validState","clear","formItems","getFields","setValue","reset","values","hasOwnProperty","orgiValue","setFormData","setValueNoChange","propChange","getEditData","getEditValue","getAddData","current","c_val","getQueryData","_id","qtype","typeId","typeObj","typeValue","isFormItem","setValid","isValid","hiddenFlag","empty","_EDITABLE_","_SHOW_","FormItem","formData","_spanCls","initialization","getFormData","errMsg","_isEdit","_editModel","_showModel","getUserData","_clearEdit","_bindChangeEvents","_init","unbind","_clearShow","selectText","jq","len","navigator","userAgent","selection","createRange","textRange","createTextRange","moveStart","collapse","select","setSelectionRange","_elHeight","height","elHeight","width","setWidth","initValue","required","immediately","model","validRules","userData","setValueFormat","returnValue","data","_sync","_validateItem","_showErrMsg","html","append","temp","change","validate","rules","v_flag","setTimeout","is","required_rule","endWith","setModel"],"mappings":"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","file":"../../../bdp.js","sourcesContent":["var _$ = BDP = {};\r\n\r\n$.extend($,{\r\n    bdp:BDP\r\n});\r\n\r\nfunction setLocalStorage(key,value){\r\n    if(!window.localStorage){\r\n        alert(\"浏览器不支持localstorage\");\r\n        return false;\r\n    }else{\r\n        var storage=window.localStorage;\r\n        storage.setItem(key,value);\r\n    }\r\n}\r\n\r\nfunction getLocalStorage(key){\r\n    if(!window.localStorage){\r\n        alert(\"浏览器不支持localstorage\");\r\n        return false;\r\n    }else{\r\n        var storage=window.localStorage;\r\n        return storage.getItem(key);\r\n    }\r\n}\r\n\r\nfunction getTopWindow(){\r\n    var topWin=window;\r\n    while(topWin.parent != topWin && isNotEmpty(topWin.parent.CC)){\r\n        topWin = topWin.parent;\r\n    }\r\n    return topWin;\r\n}\r\n\r\n$.extend(_$,{\r\n    basePath:\"/lib/bdp/\",\r\n    parseInt:function(str){\r\n        var res = parseInt(str);\r\n        return isNaN(res)?0:res;\r\n    },\r\n    parseFloat:function(str){\r\n        var res = parseFloat(str);\r\n        return isNaN(res)?0:res;\r\n    },\r\n    /**\r\n     *  解析选择器\r\n     *\r\n     *  @for _$\r\n     *  @method getTarget\r\n     * @param {String,nodeType,jquery} target 选择器\r\n     * @static\r\n     */\r\n    getTarget:function(target){\r\n        if(target.nodeType){\r\n            return $(target);\r\n        }else if(isString(target)){\r\n            return $(target);\r\n        }\r\n        return target;\r\n    },\r\n    getFunctoin:function(fn,scope){\r\n        var func;\r\n        if(scope){\r\n            func = scope[fn];\r\n        }else{\r\n            func = window[fn];\r\n        }\r\n        return func;\r\n    },\r\n    css : function(target, a) {\r\n        var j = a.toLowerCase().split(\";\");\r\n        for (var f = 0, d = j.length; f < d; f++) {\r\n            var k = j[f];\r\n            var m = k.split(\":\");\r\n            if (m.length > 1) {\r\n                if (m.length > 2) {\r\n                    var h = m[0].trim();\r\n                    m.removeAt(0);\r\n                    var g = m.join(\":\").trim();\r\n                    target.css(h, g);\r\n                } else {\r\n                    target.css(m[0].trim(), m[1].trim());\r\n                }\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\n$.extend(_$,{\r\n    extendCommon:function(childClass,parentClass,interfaces,props){\r\n        var childProps = childClass.prototype;\r\n        var parentProps=null;\r\n        if(parentClass) {\r\n            parentProps = parentClass.prototype;\r\n        }\r\n        if(parentProps != null) {\r\n            for ( var key in parentProps) {\r\n                childProps[key] = parentProps[key];\r\n            }\r\n        }\r\n        if(interfaces != null && interfaces.length>0){\r\n            for(var i=0;i<interfaces.length;i++){\r\n                var func = interfaces[i];\r\n\r\n                var interfaceName = func.interfaceName;\r\n                var interfaceProps = func.prototype;\r\n                childClass[interfaceName] = interfaceProps;\r\n                if(interfaceProps){\r\n                    for ( var key2 in interfaceProps) {\r\n                        childProps[key2] = interfaceProps[key2];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (props) {\r\n            for ( var key1 in props) {\r\n                childProps[key1] = props[key1];\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     *  解析类继承体系\r\n     *\r\n     *  @for _$\r\n     *  @method extend\r\n     * @param {Function} childClass 子类构造器\r\n     * @param {Function} parentClass 父类构造器\r\n     * @param {JSON} props 子类自定义实例方法和重写父类同名方法\r\n     * @static\r\n     */\r\n    extend: function() {\r\n        var childClass, parentClass,interfaces,props;\r\n\r\n        childClass = arguments[0];\r\n        parentClass = arguments[1];\r\n        if(arguments.length == 3){\r\n            props = arguments[2];\r\n            interfaces = [];\r\n        }else if(arguments.length == 4){\r\n            interfaces = arguments[2];\r\n            props = arguments[3];\r\n        }else{\r\n            alert(\"继承方法参数不对\");\r\n            return;\r\n        }\r\n\r\n         var parentProps = parentClass.prototype;\r\n        if (childClass.superclass == parentProps) {\r\n            return;\r\n        }\r\n\r\n        childClass.superclass = parentProps;\r\n        childClass.superclass.constructor = parentClass;\r\n\r\n         _$.extendCommon(childClass,parentClass,interfaces,props);\r\n    },\r\n\r\n    extendLoad: function() {\r\n\r\n        var childClass, parentClassName,parentClass,interfaces,props;\r\n\r\n        childClass = arguments[0];\r\n        parentClassName = arguments[1];\r\n\r\n        if(arguments.length == 3){\r\n            props = arguments[2];\r\n            interfaces = [];\r\n        }else if(arguments.length == 4){\r\n            interfaces = arguments[2];\r\n            props = arguments[3];\r\n        }else{\r\n            alert(\"继承方法参数不对\");\r\n            return;\r\n        }\r\n\r\n        parentClass =  _$.getClass(parentClassName);\r\n        if(parentClass != null) {\r\n            var childProps = childClass.prototype, parentProps = parentClass.prototype;\r\n            if (childClass.superclass == parentProps) {\r\n                return;\r\n            }\r\n\r\n            childClass.superclass = parentProps;\r\n            childClass.superclass.constructor = parentClass;\r\n\r\n            _$.extendCommon(childClass,parentClass,interfaces,props);\r\n\r\n        }else{\r\n            var res = {};\r\n            res[parentClassName]=_$.basePath+\"js/\"+parentClassName+\".js\";\r\n            _$._loadCssAndJs(res,function(){\r\n\r\n                parentClass =  _$.getClass(parentClassName);\r\n                var parentProps = parentClass.prototype;\r\n                if (childClass.superclass == parentProps) {\r\n                    return;\r\n                }\r\n\r\n                childClass.superclass = parentProps;\r\n                childClass.superclass.constructor = parentClass;\r\n\r\n                _$.extendCommon(childClass,parentClass,interfaces,props);\r\n            });\r\n        }\r\n    },\r\n\r\n    implements:function () {\r\n        var childClass,interfaces,props;\r\n        if(arguments.length == 2){\r\n            props = arguments[1];\r\n            interfaces = [];\r\n        }else if(arguments.length == 3){\r\n            interfaces = arguments[1];\r\n            props = arguments[2];\r\n        }else{\r\n            alert(\"继承方法参数不对\");\r\n            return;\r\n        }\r\n        childClass = arguments[0];\r\n        _$.extendCommon(childClass,null,interfaces,props);\r\n    }\r\n});\r\n$.extend(_$,{\r\n    components : {},\r\n    uids:{},\r\n    classes:{},\r\n    _clsPre:\"cc-\",\r\n    _uiPreCls:\"ui-\",\r\n    /**\r\n     *  注册控件对象到全局上下文中\r\n     *\r\n     *  @for _$\r\n     *  @method reg\r\n     * @param {Component} obj 控件对象\r\n     * @static\r\n     */\r\n    reg:function(obj){\r\n        if(obj === null || !obj.isComponent){\r\n            return;\r\n        }\r\n        var id = obj.id;\r\n        var uid = obj.uid;\r\n\r\n        var old = _$.components[id];\r\n        if(old != null){\r\n            if(old.uid != obj.uid){\r\n                delete _$.components[old.id];\r\n                delete _$.uids[old.uid];\r\n                _$.components[id] = obj;\r\n                _$.uids[uid] = obj;\r\n            }\r\n        }else{\r\n            _$.components[id] = obj;\r\n            _$.uids[uid] = obj;\r\n        }\r\n    },\r\n    unReg:function(obj){\r\n        if(obj === null || !obj.isComponent ){\r\n            return;\r\n        }\r\n        var id = obj.id;\r\n        var uid = obj.uid;\r\n        delete _$.components[id];\r\n        delete _$.uids[uid];\r\n    },\r\n    getById:function(id) {\r\n        var obj = _$.components[id];\r\n        return isEmpty(obj)?null:obj;\r\n    },\r\n    getByUId:function(uid) {\r\n        var obj = _$.uids[uid];\r\n        return isEmpty(obj)?null:obj;\r\n    },\r\n    regClass:function(pluginName,func){\r\n        if (func) {\r\n            if(!_$.classes[pluginName]){\r\n                func.prototype.type = pluginName;\r\n                _$.classes[pluginName] = func;\r\n            }\r\n        }\r\n    },\r\n    regPlugins:function(arr){\r\n       _$.parser.plugins.addAll(arr);\r\n    },\r\n    getClass:function(pluginName){\r\n        var func = _$.classes[pluginName];\r\n        return isEmpty(func)?null:func;\r\n    },\r\n    findControls:function(context){\r\n        var _this = this;\r\n        if(context === null) {\r\n            context = $(\"body\");\r\n        }\r\n        var list=$(\"[class^='\"+_this._uiPreCls+\"']\",context);\r\n        var items = [];\r\n        list.each(function(e){\r\n            var obj = $(this);\r\n            var uid = obj.attr(\"componentId\");\r\n            obj = _$.getByUId(uid);\r\n            if(obj){\r\n                items.add(obj);\r\n            }\r\n        });\r\n        return items;\r\n    }\r\n});\r\n\r\n$.extend(_$,{\r\n    cssLoaded:{},\r\n    jsLoaded:{},\r\n    _LOADING_:\"loading\",\r\n    _SUCCESES_:\"success\",\r\n    _WAIT_:5,\r\n    _suffix:function (url){\r\n        var index = url.lastIndexOf(\".\");\r\n        return url.substr(index+1);\r\n    },\r\n    getKeys:function(urls){\r\n        var keys = [];\r\n        for(var key in urls){\r\n            keys.add(key);\r\n        }\r\n        return keys;\r\n    },\r\n    isJsDepsLoad:function(files){\r\n        var _this = this;\r\n        return files.every(function(file){\r\n            var loadState =  _this.jsLoaded[file];\r\n            if(loadState == null || loadState == _this._LOADING_){\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n    },\r\n    isCssDepsLoad : function(files){\r\n        var _this = this;\r\n        return files.every(function(file){\r\n            var loadState =  _this.cssLoaded[file];\r\n            if(loadState == null || loadState == _this._LOADING_){\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n    },\r\n    _loadCssAndJs:function(urls,func){\r\n        var _this = this;\r\n        var keys = _this.getKeys(urls);\r\n        if(keys != null && keys.length>0){\r\n            var length = keys.length;\r\n            var count=0;\r\n            keys.each(function(key){\r\n                var obj = urls[key];\r\n                var url=\"\";\r\n                var deps=[];\r\n                if(isString(obj)){\r\n                    url = obj;\r\n                }else{\r\n                    url = obj.url;\r\n                    deps = obj.deps;\r\n                }\r\n                var suffix = _this._suffix(url);\r\n                if(\"js\" ==  suffix){\r\n                    var loadState =  _this.jsLoaded[key];\r\n                    if(loadState == null){\r\n                        var loadJs = function(){\r\n                            _this._loadJs(key,url,function(){\r\n                                count++;\r\n                                if(count == length){\r\n                                    func.call(window);\r\n                                }\r\n                            });\r\n                        };\r\n                        if(deps == null || deps.length == 0) {\r\n                            loadJs();\r\n                        }else{\r\n                            if(_this.isJsDepsLoad(deps)){\r\n                                loadJs()\r\n                            }else{\r\n                                var timer = setInterval(function(){\r\n                                    if(_this.isJsDepsLoad(deps)){\r\n                                        clearInterval(timer);\r\n                                        var depUrl = {};\r\n                                        depUrl[key] = obj;\r\n                                        _this._loadCssAndJs(depUrl,function(){\r\n                                            count++;\r\n                                            if(count == length){\r\n                                                func.call(window);\r\n                                            }\r\n                                        })\r\n                                    }\r\n                                },_this._WAIT_);\r\n                            }\r\n                        }\r\n                    }else if(loadState != null && loadState == _this._SUCCESES_){\r\n                        count++;\r\n                        if(count == length){\r\n                            func.call(window);\r\n                        }\r\n                    } else if(loadState != null && loadState == _this._LOADING_){\r\n                        var time1 = setInterval(function(){\r\n                            if(_this.isJsDepsLoad([key])){\r\n                                clearInterval(time1);\r\n                                count++;\r\n                                if(count == length){\r\n                                    func.call(window);\r\n                                }\r\n                            }\r\n                        },_this._WAIT_);\r\n                    }\r\n                }else if(\"css\" == suffix){\r\n                    var loadState =  _this.cssLoaded[key];\r\n                    if(loadState == null){\r\n                        _this._loadCss(key,url,function(){\r\n                            count++;\r\n                            if(count == length){\r\n                                func.call(window);\r\n                            }\r\n                        });\r\n                    }else if(loadState != null && loadState == _this._SUCCESES_){\r\n                        count++;\r\n                        if(count == length){\r\n                            func.call(window);\r\n                        }\r\n                    }else if(loadState != null && loadState == _this._LOADING_){\r\n                        var time2 = setInterval(function(){\r\n                            if(_this.isCssDepsLoad([key])){\r\n                                clearInterval(time2);\r\n                                count++;\r\n                                if(count == length){\r\n                                    func.call(window);\r\n                                }\r\n                            }\r\n                        },_this._WAIT_);\r\n                    }\r\n                }\r\n            });\r\n        }else{\r\n            func.call(window);\r\n        }\r\n    },\r\n    _loadJs:function(key,url,func){\r\n        var _this = this;\r\n        _this.jsLoaded[key] = _this._LOADING_;\r\n        var script = document.createElement(\"script\");\r\n        script.setAttribute(\"type\", \"text/javascript\");\r\n        script.src = url;\r\n        document.getElementsByTagName(\"head\")[0].appendChild(script);\r\n        script.onload = script.onreadystatechange = function(){\r\n            if (!this.readyState || 'loaded' === this.readyState || 'complete' === this.readyState) {\r\n                _this.jsLoaded[key] = _this._SUCCESES_;\r\n                func.call(window);\r\n            }\r\n        }\r\n    },\r\n    _loadCss:function(key,url,func){\r\n        var _this = this;\r\n        _this.cssLoaded[key] = _this._LOADING_;\r\n        var css = document.createElement(\"link\");\r\n        css.setAttribute(\"type\", \"text/css\");\r\n        css.setAttribute(\"rel\", \"stylesheet\");\r\n        css.href = url;\r\n        document.getElementsByTagName(\"head\")[0].appendChild(css);\r\n        css.onload = css.onreadystatechange = function(){\r\n            if (!this.readyState || 'loaded' === this.readyState || 'complete' === this.readyState) {\r\n                _this.cssLoaded[key] = _this._SUCCESES_;\r\n                func.call(window);\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\n$.extend(_$,{\r\n    parser:{\r\n        parseOptions: function(target,properties){\r\n            var options = {};\r\n            var s = $.trim(target.attr('data-options'));\r\n            if (s){\r\n                if (s.substring(0, 1) != '{'){\r\n                    s = '{' + s + '}';\r\n                }\r\n                options = (new Function('return ' + s))();\r\n            }\r\n\r\n            $.map(['width','height','minWidth','maxWidth','minHeight','maxHeight'], function(p){\r\n                var pv = $.trim(target[0].style[p] || '');\r\n                if (pv){\r\n                    if (pv.indexOf('%') == -1){\r\n                        pv = parseInt(pv);\r\n                        if (isNaN(pv)){\r\n                            pv = undefined;\r\n                        }\r\n                    }\r\n                    options[p] = pv;\r\n                }\r\n            });\r\n\r\n            if (properties){\r\n                var opts = {};\r\n                for(var i=0; i<properties.length; i++){\r\n                    var pp = properties[i];\r\n                    if (typeof pp == 'string'){\r\n                        opts[pp] = target.attr(pp);\r\n                    } else {\r\n                        for(var name in pp){\r\n                            var type = pp[name];\r\n                            if (type == 'boolean'  && isNotEmpty(target.attr(name))){\r\n                                var val = target[0].getAttribute(name);\r\n                                opts[name] = val ? (val == 'true') : false;\r\n                            } else if (type == 'number' && isNotEmpty(target.attr(name))){\r\n                                opts[name] = target.attr(name)=='0' ? 0 : parseFloat(target.attr(name)) ;\r\n                            }\r\n                            else if (type == 'json'){\r\n                                var s = $.trim(target.attr(name));\r\n                                if (s){\r\n                                    if (s.substring(0, 1) != '{'){\r\n                                        s = '{' + s + '}';\r\n                                    }\r\n                                    options[name] = (new Function('return ' + s))();\r\n                                }else{\r\n                                    options[name]={};\r\n                                }\r\n                            }else if(type == 'function'){\r\n                                var s = $.trim(target.attr(name));\r\n                                if(isNotEmpty(s)){\r\n                                    var func = _$.getFunctoin(s);\r\n                                    options[name]=func;\r\n                                }\r\n                            }\r\n                            else if (type == 'object'){\r\n                                var s = $.trim(target.attr(name));\r\n                                if (s){\r\n                                    options[name]=eval('(' + s + ')');\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                $.extend(options, opts);\r\n            }\r\n            return options;\r\n        },\r\n        processList:{},\r\n        plugins:[],\r\n        getProgress:function (processKey) {\r\n            var process =  this.processList[processKey];\r\n            return process;\r\n        },\r\n        setProgress:function (processKey,obj) {\r\n            this.processList[processKey] = obj;\r\n        },\r\n        onComponentComplete: function(component){\r\n            var _this = this;\r\n            if(component == null) {\r\n                return;\r\n            }\r\n            var id = component.id;\r\n            var processKey = component.processKey;\r\n\r\n            var process = _$.parser.getProgress(processKey);\r\n            if(process == null || process._IS_COMPLETE){\r\n                return;\r\n            }\r\n            process.ids.remove(id);\r\n            // logger(\"***控件[\"+type+\"]件完成,id[\" + id+\"]\");\r\n            if(process.ids.length === 0){\r\n                process._IS_COMPLETE = true;\r\n                logger(\"***控件解析完成\");\r\n                process.onComplete.call(window);\r\n            }\r\n        },\r\n        parse: function(){\r\n            var context = $(\"body\");\r\n            var callback= function (processKey) {\r\n            };\r\n            if(arguments.length == 1){\r\n                if(isFunction(arguments[0])){\r\n                    callback = arguments[0];\r\n                }else{\r\n                    context = arguments[0];\r\n                    if(isString(context)){\r\n                        context = $(context);\r\n                    }else if(context.nodeType){\r\n                        context = $(context);\r\n                    }\r\n                }\r\n            }else if(arguments.length == 2){\r\n                context = arguments[0];\r\n                callback = arguments[1];\r\n                if(isString(context)){\r\n                    context = $(context);\r\n                }else if(context.nodeType){\r\n                    context = $(context);\r\n                }\r\n            }\r\n\r\n            var processKey = uuid();\r\n            new _$.parser.parseComponent(processKey,context,callback);\r\n\r\n        },\r\n        parseComponent:function (processKey,context,callback){\r\n            _$.parser.setProgress(processKey,this);\r\n            var _this = this;\r\n            _this._IS_COMPLETE=false;\r\n            _this.count = 0;\r\n            _this.ids = [];\r\n            _this.onComplete = callback;\r\n\r\n            if(isEmpty(context) && context.size() == 0) {\r\n                return;\r\n            }\r\n            var components = {};\r\n            for(var i=0; i<_$.parser.plugins.length; i++){\r\n                var name = _$.parser.plugins[i];\r\n                var list = $('.' + _$._clsPre + name, context);\r\n                list.each(function(e){\r\n                    var obj = $(this);\r\n                    var id = obj.attr(\"id\");\r\n                    _this.count++;\r\n                    _this.ids.add(id);\r\n                });\r\n                components[name] = list;\r\n            }\r\n            if(_this.count === 0){\r\n                _this._IS_COMPLETE=true;\r\n                _this.onComplete.call(window,processKey);\r\n                return;\r\n            }\r\n            // logger(\"控件数 \" + _this.count);\r\n            for(var componentName in components){\r\n\r\n                var list1 = components[componentName];\r\n                if(list1  == null || list1.size() == 0){\r\n                    continue;\r\n                }\r\n\r\n                list1.each(function(){\r\n                    var target = $(this);\r\n                    var Func =  _$.getClass(componentName);\r\n\r\n                    if(Func !== null){\r\n                        new Func(target,processKey);\r\n                    }else{\r\n                        (function (componentName) {\r\n                            var res = {};\r\n                            res[componentName]=_$.basePath+\"js/\"+componentName+\".js\";\r\n                            _$._loadCssAndJs(res,function(){\r\n                                var job1 = setInterval(function () {\r\n                                    Func =  _$.getClass(componentName);\r\n                                    if(!Func) {\r\n                                        return\r\n                                    }\r\n                                    clearInterval(job1);\r\n                                    new Func(target,processKey);\r\n                                },20)\r\n                            });\r\n                        })(componentName)\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * UI组件顶层父类\r\n *\r\n * @class Component\r\n * @constructor\r\n * @param {String,nodeType,jquery} target 选择器\r\n * @param {String} processKey 解析器key\r\n * @namespace _$\r\n */\r\n_$.Component = function(target,processKey){\r\n    var _this = this;\r\n    _this.processKey = processKey;\r\n    target = _$.getTarget(target);\r\n    _this.events={};\r\n    _this.el = target;\r\n    _this.uid = uuid();\r\n    _this.id = target.attr(\"id\");\r\n\r\n    var opts = _this._attrOpts();\r\n    var properties = _this._attrProps();\r\n    _this.options = $.extend(true,opts,_$.parser.parseOptions(target,properties));\r\n\r\n    _$.reg(_this);\r\n    var res = _this._require();\r\n    _this._getEvents.call(_this, [\"onloadsuccess\"]);\r\n    _$._loadCssAndJs(res,function(){\r\n        _this._create();\r\n    });\r\n};\r\n\r\n\r\n/**\r\n *  组件加载完成\r\n *\r\n *  @for _$.Component\r\n *  @property onloadsuccess\r\n * @type Function\r\n */\r\n\r\n/**\r\n *  组件加载完成\r\n *\r\n *  @for _$.Component\r\n *  @event onloadsuccess\r\n * @param {Event} e 事件对象\r\n */\r\n\r\n\r\n_$.Component.prototype = {\r\n    /**\r\n     * 组件载体上下文\r\n     @for _$.Component\r\n     @property el\r\n     *@type {Boolean}\r\n     @final\r\n     */\r\n    el:null,\r\n    /**\r\n     *  判断对象是否扩展自Component构造器\r\n     @for _$.Component\r\n     @property isComponent  {Boolean}\r\n     @final\r\n     */\r\n    isComponent : true,\r\n    /**\r\n     *  ID\r\n     *\r\n     *  @for _$.Component\r\n     *  @property id\r\n     * @type Function\r\n     */\r\n    id:\"\",\r\n    uid:\"\",\r\n\r\n    component:null,\r\n    _cls:_$._clsPre + \"component\",\r\n    /**\r\n     *  组件Class\r\n     *\r\n     *  @for _$.Component\r\n     *  @property _uiCls\r\n     * @type Function\r\n     */\r\n    _uiCls:_$._uiPreCls + \"component\",\r\n    _LOADING_:'loading',\r\n    _LOAD_SUCCESS_:'success',\r\n    _LOADING_:'loading',\r\n    _LOAD_:'loading',\r\n\r\n    /**\r\n     *  组件依赖的资源文件,\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _require\r\n     */\r\n    _require:function(){\r\n        var res = {};\r\n        return res;\r\n    },\r\n    /**\r\n     *  组件加载状态,\r\n     *\r\n     *  @for _$.Component\r\n     *  @method getStatus\r\n     */\r\n    getStatus:function(){\r\n        var _this = this;\r\n        return _this._LOAD_;\r\n    },\r\n    /**\r\n     *  组件是否加载完成,\r\n     *\r\n     *  @for _$.Component\r\n     *  @method isLoaded\r\n     */\r\n    isLoaded : function () {\r\n        var _this = this;\r\n        return _this._LOAD_ == _this._LOAD_SUCCESS_;\r\n    },\r\n    /**\r\n     *  组件渲染入口,\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _create\r\n     */\r\n    _create:function(){},\r\n    /**\r\n     *  组件属性申明,\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _attrProps\r\n     */\r\n    _attrProps:function(){\r\n        return ['id', 'remark',\"onloadsuccess\",{\"plugins\":\"object\"}];\r\n    },\r\n    /**\r\n     *  组件默认配置,\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _attrOpts\r\n     */\r\n    _attrOpts:function(){\r\n        return {\r\n            \"onloadsuccess\":function() {\r\n            },\r\n            \"plugins\":{}\r\n        };\r\n    },\r\n    /**\r\n     *  组件设置css样式,\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _setStyle\r\n     */\r\n    _setStyle:function(){\r\n    },\r\n    /**\r\n     *  组件解析自定义事件\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _getEvents\r\n     * @param {Array} keys 事件类型\r\n     * @static\r\n     */\r\n    _getEvents:function(keys){\r\n        var _this = this;\r\n        $.map(keys, function(p){\r\n            var func = _this.getOption(p);\r\n            if(isNotEmpty(func)){\r\n                func = _$.getFunctoin(func);\r\n                _this._on(p,func);\r\n            }\r\n        });\r\n    },\r\n    /**\r\n     *  组件渲染完成后回调\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _loadSuccess\r\n     */\r\n    _loadSuccess:function(){\r\n        var _this=this;\r\n        if(!_this.isLoaded()){\r\n            _this._LOAD_ =  _this._LOAD_SUCCESS_;\r\n            _$.parser.onComponentComplete.call(_$.parser,_this);\r\n        }\r\n        _this._fire(\"onloadsuccess\");\r\n    },\r\n    _loadSuccessNoEvent:function(){\r\n        var _this=this;\r\n        if(!_this.isLoaded()){\r\n            _this._LOAD_ =  _this._LOAD_SUCCESS_;\r\n            _$.parser.onComponentComplete.call(_$.parser,_this);\r\n        }\r\n    },\r\n    /**\r\n     *  组件事件绑定\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _bindEvents\r\n     */\r\n    _bindEvents:function(){},\r\n    /**\r\n     *  组件事件触发\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _fire\r\n     * @param {String} type 事件类型\r\n     * @param {Object} e 事件对象\r\n     */\r\n    _fire : function(type, e) {\r\n        var _this = this;\r\n        type = type.toLowerCase();\r\n        for(var eventKey in _this.events){\r\n            if(eventKey == type){\r\n                var event = _this.events[eventKey];\r\n                _this._fireByEvent(event,eventKey,e);\r\n            }else if(eventKey.indexOf(\".\") != -1){\r\n                var arr = eventKey.split(\".\");\r\n                if(arr[1] == type){\r\n                    var event = _this.events[eventKey];\r\n                    _this._fireByEvent(event,eventKey,e);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     *  组件事件按配置触发\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _fireByEvent\r\n     * @param {String} event 组件事件存储配置\r\n     * @param {String} type 事件类型\r\n     * @param {Object} e 事件对象\r\n     */\r\n    _fireByEvent:function(event,type,e){\r\n        var _this = this;\r\n\r\n        if (event) {\r\n            if (!e) {\r\n                e = {};\r\n            }\r\n            if (e && e != _this) {\r\n                e.source = _this;\r\n                if (!e.type) {\r\n                    e.type = type;\r\n                }\r\n                e.name = _this.name || _this.name;\r\n                e.id = _this.id;\r\n                e.name = _this.id;\r\n                e.source=_this;\r\n            }\r\n            for ( var c = 0, a = event.length; c < a; c++) {\r\n                var item = event[c];\r\n                if (item) {\r\n                    item[0].apply(item[1], [ e ]);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     *  组件事件注册\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _on\r\n     * @param {String} type 事件类型\r\n     * @param {Function} fn 事件处理器\r\n     * @param {Object} scope 事件作用域\r\n     */\r\n    _on : function(type, fn, scope) {\r\n        var _this = this;\r\n        if (typeof fn == \"string\") {\r\n            var func = _$.getFunctoin(fn,scope);\r\n            if (func) {\r\n                fn = func;\r\n            }\r\n        }\r\n        if (typeof fn != \"function\" || !type) {\r\n            return false;\r\n        }\r\n        type = type.toLowerCase();\r\n        var event = _this.events[type];\r\n        if (!event) {\r\n            event = _this.events[type] = [];\r\n        }\r\n        scope = scope || _this;\r\n        if (!_this._findListener(type, fn, scope)) {\r\n            event.push([ fn, scope ]);\r\n            _this.events[type]=event;\r\n        }\r\n        return _this;\r\n    },\r\n    /**\r\n     *  组件按事件前缀注销\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _unPrefix\r\n     * @param {String} prefix 事件类型前缀\r\n     */\r\n    _unPrefix:function (prefix) {\r\n        var _this = this;\r\n        for(var eventKey in _this.events){\r\n            if(eventKey.indexOf(\".\") != -1){\r\n                var arr = eventKey.split(\".\");\r\n                if(arr[0] == prefix){\r\n                    delete _this.events[eventKey];\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     *  组件按事件类型注销\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _un\r\n     * @param {String} prefix 事件类型前缀\r\n     */\r\n    _un : function(type, fn, scope) {\r\n        var _this = this;\r\n        if (typeof fn != \"function\") {\r\n            return false;\r\n        }\r\n        type = type.toLowerCase();\r\n        var event = _this.events[type];\r\n        if (event) {\r\n            scope = scope || _this;\r\n            var item = _this._findListener(type, fn, scope);\r\n            if (item) {\r\n                event.remove(item);\r\n            }\r\n        }\r\n        return _this;\r\n    },\r\n    /**\r\n     *  查询事件处理器\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _findListener\r\n     * @param {String} type 事件类型\r\n     * @param {Function} func 事件处理器\r\n     * @param {Object} scope 事件作用域\r\n     */\r\n    _findListener : function(type, func, scope) {\r\n\r\n        var _this = this;\r\n        type = type.toLowerCase();\r\n        scope = scope || _this;\r\n        var event = _this.events[type];\r\n        if (event) {\r\n            for ( var i = 0; i < event.length ; i++) {\r\n                var item = event[i];\r\n                if (item[0] == func && item[1] == scope) {\r\n                    return item;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     *  替换组件原Dom对象\r\n     *\r\n     *  @for _$.Component\r\n     *  @method _replaceNode\r\n     * @param {String} source 新html\r\n     */\r\n    _replaceNode:function(source){\r\n        var _this = this;\r\n        var template = Handlebars.compile(source);\r\n        var result = template(_this.options);\r\n        var element = $(result);\r\n        _this.el.replaceWith(element);\r\n        _this.el = element;\r\n        _this.el.addClass(_this._uiCls);\r\n        _this.el.attr(\"componentId\",_this.uid);\r\n    },\r\n    /**\r\n     *  修改组件配置\r\n     *\r\n     *  @for _$.Component\r\n     *  @method setOption\r\n     * @param {String} key 配置key\r\n     * @param {Object} value 配置value\r\n     */\r\n    setOption:function(key,value){\r\n        var _this = this;\r\n        _this.options[key]=value;\r\n    },\r\n    /**\r\n     *  获取组件配置\r\n     *\r\n     *  @for _$.Component\r\n     *  @method getOption\r\n     * @param {String} key 配置key\r\n     */\r\n    getOption:function(key){\r\n        var _this = this;\r\n        var value = _this.options[key];\r\n        return value;\r\n    },\r\n    /**\r\n     *  组件toString方法\r\n     *\r\n     *  @for _$.Component\r\n     *  @method toString\r\n     */\r\n    toString:function(){\r\n        var _this = this;\r\n        return _this.id;\r\n    },\r\n    /**\r\n     *  组件销毁方法\r\n     *\r\n     *  @for _$.Component\r\n     *  @method destroy\r\n     */\r\n    destroy : function() {\r\n        var _this = this;\r\n        this.el.remove();\r\n        _$.unReg(_this);\r\n    }\r\n};\r\n\r\n/**\r\n *   验证组件\r\n *\r\n * @class validator\r\n * @namespace _$\r\n */\r\n$.extend(_$,{\r\n    \"validator\":{\r\n        execute:function(id,name,value,nameCn,rule){\r\n\r\n            var dtd=$.Deferred();\r\n            var _this = this;\r\n            var type = rule[\"type\"];\r\n            var validMsg = isEmpty(rule[\"msg\"]) ? _this.messages[type] : rule[\"msg\"];\r\n            var ruleValue = rule['value'];\r\n\r\n            var handler = _this.methods[type];\r\n\r\n            var params={\r\n                \"value\":value,\r\n                \"id\":id,\r\n                \"name\":name,\r\n                \"nameCn\":nameCn,\r\n                \"ruleValue\":ruleValue,\r\n                \"validMsg\":validMsg\r\n            };\r\n\r\n            $.when(handler.call(window,params))\r\n            .done(function(res){\r\n                dtd.resolve(res);\r\n            })\r\n            .fail(function(err){\r\n                dtd.reject(err)\r\n            });\r\n            return dtd.promise();\r\n\r\n        },\r\n        addMethod:function(name,func,msg){\r\n            _$.validator.methods[name] = func;\r\n            _$.validator.messages[name] = msg;\r\n        },\r\n        messages:{\r\n        },\r\n        format:function(source, params ) {\r\n            var _this = this;\r\n            if ( arguments.length === 1 ) {\r\n                return function() {\r\n                    var args = $.makeArray( arguments );\r\n                    args.unshift( source );\r\n                    return _this.format.apply( this, args );\r\n                };\r\n            }\r\n            if ( arguments.length > 2 && params.constructor !== Array  ) {\r\n                params = $.makeArray( arguments ).slice( 1 );\r\n            }\r\n            if ( params.constructor !== Array ) {\r\n                params = [ params ];\r\n            }\r\n            $.each( params, function( i, n ) {\r\n                source = source.replace( new RegExp( \"\\\\{\" + i + \"\\\\}\", \"g\" ), function() {\r\n                    return n;\r\n                });\r\n            });\r\n            return source;\r\n        },\r\n        zeroHandler:function(params,func,names,type){\r\n            var dtd=$.Deferred();\r\n            var value=params[\"value\"];\r\n            var nameCn=params[\"nameCn\"];\r\n            var validMsg=params[\"validMsg\"];\r\n\r\n\r\n            if (isEmpty(value) && type != 'required') {\r\n                var res = {\r\n                    \"state\":true,\r\n                    \"info\":\"\"\r\n                };\r\n                dtd.resolve(res);\r\n            }else{\r\n                $.when(func.call(null,value))\r\n                .done(function(state){\r\n                    if(isEmpty(names)){\r\n                        names = [nameCn]\r\n                    }\r\n                    var info = _$.validator.format(validMsg, names);\r\n                    var res = {\r\n                        \"state\":state,\r\n                        \"info\":info\r\n                    };\r\n                    dtd.resolve(res);\r\n                })\r\n                .fail(function(err){\r\n                    dtd.reject(err)\r\n                });\r\n            }\r\n\r\n\r\n            return dtd.promise();\r\n        },\r\n        oneHandler:function(params,func){\r\n            var value=params[\"value\"];\r\n            var nameCn=params[\"nameCn\"];\r\n            var param=params[\"ruleValue\"];\r\n            var validMsg=params[\"validMsg\"];\r\n            var dtd=$.Deferred();\r\n\r\n            if (isEmpty(value)) {\r\n                var res = {\r\n                    \"state\":true,\r\n                    \"info\":\"\"\r\n                };\r\n                dtd.resolve(res);\r\n            }else{\r\n                $.when(func.call(null,value,param))\r\n                .done(function(state){\r\n                    var  names = [nameCn,param];\r\n                    var info = _$.validator.format(validMsg, names);\r\n\r\n                    var res = {\r\n                        \"state\":state,\r\n                        \"info\":info\r\n                    };\r\n                    dtd.resolve(res);\r\n                })\r\n                .fail(function(err){\r\n                    dtd.reject(err)\r\n                });\r\n            }\r\n            return dtd.promise();\r\n        },\r\n        twoHandler:function(params,func){\r\n\r\n            var value=params[\"value\"];\r\n            var nameCn=params[\"nameCn\"];\r\n            var ruleValue=params[\"ruleValue\"];\r\n            var validMsg=params[\"validMsg\"];\r\n            var dtd=$.Deferred();\r\n\r\n            if (isEmpty(value)) {\r\n                var res = {\r\n                    \"state\":true,\r\n                    \"info\":\"\"\r\n                };\r\n                dtd.resolve(res);\r\n            }else{\r\n                var arr = ruleValue.split(\",\");\r\n                var param1 = arr[0];\r\n                var param2 = arr[1];\r\n\r\n                $.when(func.call(null,value,param1,param2))\r\n                    .done(function(state){\r\n                        var names = [nameCn,param1,param2];\r\n                        var info = _$.validator.format(validMsg, names);\r\n\r\n                        var res = {\r\n                            \"state\":state,\r\n                            \"info\":info\r\n                        };\r\n                        dtd.resolve(res);\r\n                    })\r\n                    .fail(function(err){\r\n                        dtd.reject(err)\r\n                    });\r\n\r\n            }\r\n        },\r\n        compareTo:function (val1,val2,format) {\r\n            if(isNotEmpty(format)){\r\n                //日期\r\n                var date1 = parseDate(val1,format).getTime();\r\n                var date2 = parseDate(val2,format).getTime();\r\n\r\n                if(date1 == date2)  {\r\n                    return 0;\r\n                }else if(date1 < date2) {\r\n                    return -1\r\n                }else{\r\n                    return 1;\r\n                }\r\n            }else {\r\n                if(val1 == val2)  {\r\n                    return 0;\r\n                }else if(val1 < val2) {\r\n                    return -1\r\n                }else{\r\n                    return 1;\r\n                }\r\n            }\r\n            return 0;\r\n        },\r\n        methods: {\r\n        }\r\n    }\r\n});\r\n\r\n\r\n_$.validator.addMethod(\"required\",function(params){\r\n   return _$.validator.zeroHandler(params,function(val){\r\n       var dtd=$.Deferred();\r\n       var flag = isNotEmpty(val);\r\n       dtd.resolve(flag);\r\n       return dtd.promise();\r\n    },null,\"required\");\r\n},\"[{0}]必填\");\r\n_$.validator.addMethod(\"email\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须是有效的电子邮件地址\");\r\n_$.validator.addMethod(\"password\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /^[A-Za-z0-9]{6,20}$/;\r\n\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须由6-20位字母数字组成\");\r\n_$.validator.addMethod(\"mobile\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /^1\\d{10}$/;\r\n\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须是有效的手机号\");\r\n_$.validator.addMethod(\"tel\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /^0\\d{2,3}-?\\d{7,8}$/;\r\n\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须是有效的座机号\");\r\n_$.validator.addMethod(\"url\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /^((https|http|ftp|rtsp|mms)?:\\/\\/)+[A-Za-z0-9]+\\.[A-Za-z0-9]+[\\/=\\?%\\-&_~`@[\\]\\':+!]*([^<>\\\"\\\"])*$/;\r\n\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须是有效的网址\");\r\n_$.validator.addMethod(\"account\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /^[a-z0-9A-z]\\w{5,9}$/;\r\n\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须是由6-10位字母和数字组成\");\r\n_$.validator.addMethod(\"money\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /(^-?[1-9]([0-9]+)?(\\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\\.[0-9]([0-9])?$)/;\r\n\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须是有效的金钱格式\");\r\n_$.validator.addMethod(\"number\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /^(\\-|\\+)?\\d+(\\.\\d+)?$/;\r\n\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须是数字\");\r\n_$.validator.addMethod(\"integer\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /^[1-9]\\d*$/;\r\n\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须是正整数\");\r\n_$.validator.addMethod(\"positive\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /^-?\\d+$/;\r\n\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须是整数\");\r\n_$.validator.addMethod(\"natural\",function(params){\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var reg = /^\\d+$/;\r\n\r\n        var dtd=$.Deferred();\r\n        var flag = reg.test(val);\r\n        dtd.resolve(flag);\r\n        return dtd.promise();\r\n    });\r\n},\"[{0}]必须是自然数\");\r\n_$.validator.addMethod(\"min\",function(params){\r\n    return  _$.validator.oneHandler(params,function(val,num){\r\n        var dtd=$.Deferred();\r\n\r\n        if (isNaN(val)) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n        val = parseFloat(val);\r\n        if (val > num) {\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]必须大于{1}\");\r\n_$.validator.addMethod(\"minEq\",function(params){\r\n    return  _$.validator.oneHandler(params,function(val,num){\r\n        var dtd=$.Deferred();\r\n        if (isNaN(val)) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n        val = parseFloat(val);\r\n        if (val >= num) {\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]必须大于等于{1}\");\r\n_$.validator.addMethod(\"max\",function(params){\r\n    return  _$.validator.oneHandler(params,function(val,num){\r\n        var dtd=$.Deferred();\r\n        if (isNaN(val)) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n        val = parseFloat(val);\r\n        if (val < num) {\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]必须小于{1}\");\r\n_$.validator.addMethod(\"maxEq\",function(params){\r\n    return  _$.validator.oneHandler(params,function(val,num){\r\n        var dtd=$.Deferred();\r\n        if (isNaN(val)) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n        val = parseFloat(val);\r\n        if (val <= num) {\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]必须小于等于{1}\");\r\n_$.validator.addMethod(\"minLength\",function(params){\r\n    return  _$.validator.oneHandler(params,function(val,min){\r\n        var dtd=$.Deferred();\r\n        var str = (val + \"\").trim();\r\n        if (str.length <= min) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]必须大于{1}个字符\");\r\n_$.validator.addMethod(\"maxLength\",function(params){\r\n    return  _$.validator.oneHandler(params,function(val,max){\r\n        var dtd=$.Deferred();\r\n        var str = (val + \"\").trim();\r\n        if (str.length >= max) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]必须小于{1}个字符\");\r\n_$.validator.addMethod(\"minLengthEq\",function(params){\r\n    return  _$.validator.oneHandler(params,function(val,min){\r\n        var dtd=$.Deferred();\r\n        var str = (val + \"\").trim();\r\n        if (str.length < min) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]必须大于等于{1}个字符\");\r\n_$.validator.addMethod(\"maxLengthEq\",function(params){\r\n    return  _$.validator.oneHandler(params,function(val,max){\r\n        var dtd=$.Deferred();\r\n        var str = (val + \"\").trim();\r\n        if (str.length > max) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]必须小于等于{1}个字符\");\r\n_$.validator.addMethod(\"rangeLength\",function(params){\r\n    return  _$.validator.twoHandler(params,function(val,min,max){\r\n        var dtd=$.Deferred();\r\n        var str = (val + \"\").trim();\r\n        if (str.length < max && str.length > min) {\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]长度必须是大{1},小于{2}\");\r\n_$.validator.addMethod(\"rangeLengthEq\",function(params){\r\n    return  _$.validator.twoHandler(params,function(val,min,max){\r\n        var dtd=$.Deferred();\r\n        var str = (val + \"\").trim();\r\n        if (str.length <= max && str.length >= min) {\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]长度必须是大于{1},小于等于{2}\");\r\n_$.validator.addMethod(\"range\",function(params){\r\n    return  _$.validator.twoHandler(params,function(val,min,max){\r\n        var dtd=$.Deferred();\r\n        if (isNaN(val)) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n        val = parseFloat(val);\r\n        if (val < max && val > min) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]必须大于{1},小于{2}\");\r\n_$.validator.addMethod(\"rangeEq\",function(params){\r\n    return  _$.validator.twoHandler(params,function(val,min,max){\r\n        var dtd=$.Deferred();\r\n        if (isNaN(val)) {\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n        val = parseFloat(val);\r\n        if (val <= max && val >= min) {\r\n            dtd.resolve(true);\r\n            return dtd.promise();\r\n        }else{\r\n            dtd.resolve(false);\r\n            return dtd.promise();\r\n        }\r\n    });\r\n},\"[{0}]必须是大于等于{1},小于等于{2}\");\r\n_$.validator.addMethod(\"greaterEqThan\",function(params){\r\n    var ruleValue=params[\"ruleValue\"];\r\n    var arr = ruleValue.split(\",\");\r\n\r\n    if(arr.length == 1){\r\n        var compareTo = arr[0];\r\n        var objTo = _$.getById(compareTo)\r\n        var valueTo = objTo.getValue();\r\n\r\n        var nameCn=params[\"nameCn\"];\r\n        var nameCnTo = objTo.getOption(\"nameCn\");\r\n\r\n        var names = [nameCn,nameCnTo];\r\n        return  _$.validator.zeroHandler(params,function(val){\r\n            var dtd=$.Deferred();\r\n            var result =_$.validator.compareTo(val,valueTo) >= 0;\r\n            dtd.resolve(result);\r\n            return dtd.promise();\r\n        },names);\r\n    }else if(arr.length == 2){\r\n        var compareTo = arr[0];\r\n        var format = arr[1];\r\n        var objTo = _$.getById(compareTo)\r\n        var valueTo = objTo.getValue();\r\n\r\n        var nameCn=params[\"nameCn\"];\r\n        var nameCnTo = objTo.getOption(\"nameCn\");\r\n\r\n        var names = [nameCn,nameCnTo];\r\n        return  _$.validator.zeroHandler(params,function(val){\r\n            var dtd=$.Deferred();\r\n            var result =_$.validator.compareTo(val,valueTo,format) >= 0;\r\n            dtd.resolve(result);\r\n            return dtd.promise();\r\n\r\n        },names);\r\n    }\r\n},\"[{0}]必须大于等于[{1}]\");\r\n_$.validator.addMethod(\"greaterThan\",function(params){\r\n    var ruleValue=params[\"ruleValue\"];\r\n    var arr = ruleValue.split(\",\");\r\n\r\n    if(arr.length == 1){\r\n        var compareTo = arr[0];\r\n        var objTo = _$.getById(compareTo)\r\n        var valueTo = objTo.getValue();\r\n\r\n        var nameCn=params[\"nameCn\"];\r\n        var nameCnTo = objTo.getOption(\"nameCn\");\r\n\r\n        var names = [nameCn,nameCnTo];\r\n        return  _$.validator.zeroHandler(params,function(val){\r\n            var dtd=$.Deferred();\r\n            var result = _$.validator.compareTo(val,valueTo) > 0;\r\n            dtd.resolve(result);\r\n            return dtd.promise();\r\n        },names);\r\n    }else if(arr.length == 2){\r\n        var compareTo = arr[0];\r\n        var format = arr[1];\r\n        var objTo = _$.getById(compareTo)\r\n        var valueTo = objTo.getValue();\r\n\r\n        var nameCn=params[\"nameCn\"];\r\n        var nameCnTo = objTo.getOption(\"nameCn\");\r\n\r\n        var names = [nameCn,nameCnTo];\r\n        return  _$.validator.zeroHandler(params,function(val){\r\n            var dtd=$.Deferred();\r\n            var result = _$.validator.compareTo(val,valueTo,format) > 0;\r\n            dtd.resolve(result);\r\n            return dtd.promise();\r\n\r\n        },names);\r\n    }\r\n},\"[{0}]必须大于[{1}]\");\r\n_$.validator.addMethod(\"lessEqThan\",function(params){\r\n    var ruleValue=params[\"ruleValue\"];\r\n    var arr = ruleValue.split(\",\");\r\n\r\n    if(arr.length == 1){\r\n        var compareTo = arr[0];\r\n        var objTo = _$.getById(compareTo)\r\n        var valueTo = objTo.getValue();\r\n\r\n        var nameCn=params[\"nameCn\"];\r\n        var nameCnTo = objTo.getOption(\"nameCn\");\r\n\r\n        var names = [nameCn,nameCnTo];\r\n        return  _$.validator.zeroHandler(params,function(val){\r\n            var dtd=$.Deferred();\r\n            var result =_$.validator.compareTo(val,valueTo) <= 0;\r\n            dtd.resolve(result);\r\n            return dtd.promise();\r\n        },names);\r\n    }else if(arr.length == 2){\r\n        var compareTo = arr[0];\r\n        var format = arr[1];\r\n        var objTo = _$.getById(compareTo)\r\n        var valueTo = objTo.getValue();\r\n\r\n        var nameCn=params[\"nameCn\"];\r\n        var nameCnTo = objTo.getOption(\"nameCn\");\r\n\r\n        var names = [nameCn,nameCnTo];\r\n        return  _$.validator.zeroHandler(params,function(val){\r\n            var dtd=$.Deferred();\r\n            var result =_$.validator.compareTo(val,valueTo,format) <= 0;\r\n            dtd.resolve(result);\r\n            return dtd.promise();\r\n\r\n        },names);\r\n    }\r\n},\"[{0}]必须小于等于[{1}]\");\r\n_$.validator.addMethod(\"lessThan\",function(params){\r\n    var ruleValue=params[\"ruleValue\"];\r\n    var arr = ruleValue.split(\",\");\r\n\r\n    if(arr.length == 1){\r\n        var compareTo = arr[0];\r\n        var objTo = _$.getById(compareTo)\r\n        var valueTo = objTo.getValue();\r\n\r\n        var nameCn=params[\"nameCn\"];\r\n        var nameCnTo = objTo.getOption(\"nameCn\");\r\n\r\n        var names = [nameCn,nameCnTo];\r\n        return  _$.validator.zeroHandler(params,function(val){\r\n            var dtd=$.Deferred();\r\n            var result = _$.validator.compareTo(val,valueTo) < 0;\r\n            dtd.resolve(result);\r\n            return dtd.promise();\r\n        },names);\r\n    }else if(arr.length == 2){\r\n        var compareTo = arr[0];\r\n        var format = arr[1];\r\n        var objTo = _$.getById(compareTo)\r\n        var valueTo = objTo.getValue();\r\n\r\n        var nameCn=params[\"nameCn\"];\r\n        var nameCnTo = objTo.getOption(\"nameCn\");\r\n\r\n        var names = [nameCn,nameCnTo];\r\n        return  _$.validator.zeroHandler(params,function(val){\r\n            var dtd=$.Deferred();\r\n            var result = _$.validator.compareTo(val,valueTo,format) < 0;\r\n            dtd.resolve(result);\r\n            return dtd.promise();\r\n\r\n        },names);\r\n    }\r\n},\"[{0}]必须小于[{1}]\");\r\n_$.validator.addMethod(\"equalTo\",function(params){\r\n    var ruleValue=params[\"ruleValue\"];\r\n    var arr = ruleValue.split(\",\");\r\n\r\n    var compareTo = arr[0];\r\n    var objTo = _$.getById(compareTo)\r\n    var valueTo = objTo.getValue();\r\n\r\n    var nameCn=params[\"nameCn\"];\r\n    var nameCnTo = objTo.getOption(\"nameCn\");\r\n\r\n    var names = [nameCn,nameCnTo];\r\n    return  _$.validator.zeroHandler(params,function(val){\r\n        var dtd=$.Deferred();\r\n        var result = _$.validator.compareTo(val,valueTo) == 0;\r\n        dtd.resolve(result);\r\n        return dtd.promise();\r\n    },names);\r\n},\"[{0}]必须等于[{1}]\");\r\n\r\n/**\r\n * @class Form\r\n * @constructor\r\n * @extends _$.Component\r\n * @param {String,nodeType,jquery} target 选择器\r\n * @namespace _$\r\n */\r\n_$.Form=function(target,formId){\r\n    target = _$.getTarget(target);\r\n    var _this = this;\r\n    _this.el = target;\r\n    _this.formId = formId;\r\n\r\n    var opts = {\r\n    };\r\n    _this.options = $.extend(true,opts);\r\n};\r\n\r\n_$.Form.prototype = {\r\n    validState:true,\r\n    clear:function(){\r\n        var _this = this;\r\n        var formItems =  _this.getFields(_this.el);\r\n        if(formItems !== null  && formItems.length>0){\r\n            for(var i=0;i<formItems.length;i++){\r\n                var obj = formItems[i];\r\n                if(obj){\r\n                    obj.setValue(null);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    reset:function(){\r\n        var _this = this;\r\n        var formItems =  _this.getFields(_this.el);\r\n        if(formItems !== null  && formItems.length>0){\r\n            for(var i=0;i<formItems.length;i++){\r\n                var obj = formItems[i];\r\n                if(obj){\r\n                    obj.reset();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    setValue:function(values){\r\n        var _this = this;\r\n        var formItems =  _this.getFields(_this.el);\r\n        for(var i=0;i<formItems.length;i++){\r\n            var obj = formItems[i];\r\n            if(obj != null){\r\n                var key = obj.getOption(\"name\") || obj.id;\r\n                if(values.hasOwnProperty(key)){\r\n                    var value = values[key];\r\n                    obj.orgiValue = value;\r\n                    var setValueFormat = obj.getOption(\"setValueFormat\");\r\n\r\n                    value = setValueFormat.call(window,values,value,obj.id);\r\n                    if(_this.formId){\r\n                        obj.setFormData(values,_this.formId);\r\n                    }\r\n                    obj.setValue(value);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    setValueNoChange:function(values,propChange){\r\n        var _this = this;\r\n        if(isEmpty(propChange)){\r\n            propChange={};\r\n        }\r\n        var formItems =  _this.getFields(_this.el);\r\n        for(var i=0;i<formItems.length;i++){\r\n            var obj = formItems[i];\r\n            if(obj != null){\r\n                var key = obj.getOption(\"name\") || obj.id;\r\n                if(values.hasOwnProperty(key)){\r\n                    var value = values[key];\r\n                    obj.orgiValue = value;\r\n                    var setValueFormat = obj.getOption(\"setValueFormat\");\r\n                    value = setValueFormat.call(window,values,value);\r\n                    if(_this.formId){\r\n                        obj.setFormData(values,_this.formId);\r\n                    }\r\n                    var change = propChange[key];\r\n                    if(!change){\r\n                        obj.setValue(value,false);\r\n                    }else{\r\n                        obj.setValue(value);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    getValue:function(){\r\n        var _this = this;\r\n        var formItems =  _this.getFields(_this.el);\r\n        var values = {};\r\n        for(var i=0;i<formItems.length;i++){\r\n            var obj = formItems[i];\r\n            if(obj !== null){\r\n                var returnValue = obj.getOption(\"returnValue\");\r\n                if(returnValue){\r\n                    var value = obj.getValue();\r\n                    if(isNotEmpty(value)){\r\n                        var key = obj.getOption(\"name\") || obj.id;\r\n                        values[key] = value;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return values;\r\n    },\r\n    getEditData:function(){\r\n        var _this = this;\r\n        var formItems =  _this.getFields(_this.el);\r\n        var values = {};\r\n        for(var i=0;i<formItems.length;i++){\r\n            var obj = formItems[i];\r\n            if(obj !== null){\r\n                obj.getEditValue(values);\r\n            }\r\n        }\r\n        return values;\r\n    },\r\n    getAddData:function(){\r\n        var _this = this;\r\n        var values = {};\r\n        var current = _this.getValue();\r\n        for(var key in current){\r\n            var c_val = current[key];\r\n            if(isNotEmpty(c_val)){\r\n                values[key] = c_val;\r\n            }\r\n        }\r\n        return values;\r\n    },\r\n    getQueryData:function(){\r\n        var _this = this;\r\n        var formItems =  _this.getFields(_this.el);\r\n        var values = {};\r\n        for(var i=0;i<formItems.length;i++){\r\n            var obj =formItems[i];\r\n            var _id =obj.id;\r\n\r\n            if((_id+\"\").indexOf(\"_type\") != -1){\r\n                continue;\r\n            }\r\n            if(obj != null){\r\n                var value = obj.getValue();\r\n                if(isNotEmpty(value)){\r\n                    var name = obj.getOption(\"name\") || _id;\r\n                    values[name] = value;\r\n\r\n                    var qtype = obj.getOption(\"qtype\");\r\n                    qtype = qtype || _id;\r\n                    var typeId = qtype + \"_type\";\r\n\r\n                    var typeObj = _$.getById(typeId);\r\n\r\n                    if(typeObj!= null){\r\n                        var typeValue = typeObj.getValue();\r\n                        if(isNotEmpty(typeValue)){\r\n                            var typeName = typeObj.getOption(\"name\");\r\n                            values[typeName] = typeValue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return values;\r\n    },\r\n    getFields:function(){\r\n        var _this = this;\r\n        var items = _$.findControls(_this.el);\r\n\r\n        var list = [];\r\n        for(var i=0;i<items.length;i++){\r\n            var item = items[i];\r\n            if(item.isFormItem){\r\n                list.add(item);\r\n            }\r\n        }\r\n        return list;\r\n    },\r\n    setValid:function(flag){\r\n        var _this = this;\r\n        _this.validState = flag;\r\n        var formItems = _this.getFields();\r\n        for(var i=0;i<formItems.length;i++){\r\n            var obj = formItems[i];\r\n            obj.setValid(flag);\r\n        }\r\n    },\r\n    isValid:function(hiddenFlag){\r\n        var _this = this;\r\n        var dtd=$.Deferred();\r\n\r\n        $(\"#validDiv\").empty();\r\n        hiddenFlag = hiddenFlag || false;\r\n        _this.validState = true;\r\n\r\n        var formItems = _this.getFields();\r\n\r\n        var arr = [];\r\n        for(var i=0;i<formItems.length;i++){\r\n            var obj = formItems[i];\r\n            arr.push(obj.isValid(hiddenFlag));\r\n        }\r\n\r\n        $.when.apply(this,arr)\r\n        .done(function(){\r\n            for (var i = 0; i < arguments.length; i++) {\r\n                var flag = arguments[i];\r\n               if(_this.validState && !flag){\r\n                   _this.validState = flag;\r\n                   break;\r\n               }\r\n            }\r\n            dtd.resolve(_this.validState);\r\n        })\r\n        .fail(function(err){\r\n            dtd.reject(err)\r\n        });\r\n\r\n        return dtd.promise();\r\n    }\r\n};\r\n/**\r\n *  表单组件模块\r\n *\r\n * @submodule form\r\n * @module CC\r\n */\r\n\r\n/**\r\n *  表单组件父类\r\n * @class FormItem\r\n * @submodule form\r\n * @constructor\r\n * @extends _$.Component\r\n * @param {String,nodeType,jquery} target 选择器\r\n * @param {String} processKey 解析器key\r\n * @namespace _$\r\n */\r\n\r\nvar _EDITABLE_ = 1;\r\nvar _SHOW_ = 0;\r\n_$.FormItem = function(target,processKey){\r\n    var _this = this;\r\n    _$.FormItem.superclass.constructor.call(_this,target,processKey);\r\n};\r\n\r\n_$.extend(_$.FormItem,_$.Component,{\r\n    /**\r\n     * 判断组件是否是表单\r\n     @for _$.FormItem\r\n     @property isFormItem\r\n     *@type {Boolean}\r\n     */\r\n    isFormItem:true,\r\n    formData:{},\r\n    /**\r\n     * 组件取值\r\n     @for _$.FormItem\r\n     @property value\r\n     *@type {Object}\r\n     */\r\n    value:null,\r\n    /**\r\n     * 组件原值\r\n     @for _$.FormItem\r\n     @property value\r\n     *@type {Object}\r\n     */\r\n    orgiValue:null,\r\n    _uiCls:_$._uiPreCls + \"FormItem\",\r\n    _cls:_$._clsPre + \"formItem\",\r\n    _spanCls:_$._uiPreCls + \"span\",\r\n    /**\r\n     * 组件校验状态\r\n     @for _$.FormItem\r\n     @property validState\r\n     *@type {Boolean}\r\n     */\r\n    validState:true,\r\n    initialization:false,\r\n    setFormData:function (values,formId) {\r\n        var _this = this;\r\n        _this.formData[formId] = values;\r\n    },\r\n    getFormData:function (formId) {\r\n        var _this = this;\r\n        return _this.formData[formId];\r\n    },\r\n    /**\r\n     * 组件校验失败信息\r\n     @for _$.FormItem\r\n     @property errMsg\r\n     *@type {Array}\r\n     */\r\n    errMsg:[],\r\n    _create :function(){\r\n        var _this = this;\r\n        if(_this._isEdit()){\r\n            _this._editModel();\r\n        }else{\r\n            _this._showModel();\r\n        }\r\n        _this.initialization=true;\r\n        _this.el.attr(\"formId\",_this.id);\r\n    },\r\n    /**\r\n     *  组件编辑模式初始化,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _editModel\r\n     */\r\n    _editModel:function(){\r\n    },\r\n    /**\r\n     *  获取用户自定义数据,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method getUserData\r\n     */\r\n    getUserData:function () {\r\n        var _this = this;\r\n        return _this.getOption(\"userData\");\r\n    },\r\n    /**\r\n     *  组件展示模式初始化,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _editModel\r\n     */\r\n    _showModel:function(){\r\n        var _this = this;\r\n        _this.setOption(\"model\",_SHOW_);\r\n        _this._clearEdit();\r\n        var source='<div class=\"showDiv\"></div>';\r\n        _this._replaceNode(source);\r\n        _this.el.addClass(_this._spanCls);\r\n        _this.el.addClass(\"FormItem\");\r\n        _this.component = $(\".showDiv\",_this.el);\r\n        _this._bindChangeEvents();\r\n        _this._init();\r\n    },\r\n    /**\r\n     *  清空编辑模式,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _clearEdit\r\n     */\r\n    _clearEdit:function(){\r\n        var _this = this;\r\n        if(_this.component){\r\n            _this.component.unbind();\r\n            _this.component.remove();\r\n        }\r\n    },\r\n    /**\r\n     *  清空展示模式,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _clearShow\r\n     */\r\n    _clearShow:function(){\r\n        var _this = this;\r\n        if(_this.component){\r\n            _this.component.remove();\r\n        }\r\n    },\r\n\r\n    selectText:function (jq) {\r\n        var _this = this;\r\n        var val = jq.val() +\"\";\r\n        var len = val.length;\r\n        var obj =jq[0];\r\n        if(navigator.userAgent.indexOf(\"MSIE\") > -1){\r\n            var range = document.selection.createRange();\r\n            var textRange = obj.createTextRange();\r\n            textRange.moveStart('character',len);\r\n            textRange.collapse();\r\n            textRange.select();\r\n        }else{\r\n            obj.setSelectionRange(0,len);\r\n        }\r\n    },\r\n\r\n    _elHeight:function () {\r\n        var _this = this;\r\n        var height =_this.getOption('height');\r\n        if(isNotEmpty(height)){\r\n            var validDivHeight = $(\".form_item_valid\",_this.el).height();\r\n            var memoDivHeight = $(\".form_item_memo\",_this.el).height();\r\n            var elHeight = validDivHeight + memoDivHeight + height;\r\n            _this.el.height(elHeight);\r\n        }\r\n    },\r\n    _setStyle:function(){\r\n        var _this = this;\r\n        var width = _this.getOption('width');\r\n        if(isNotEmpty(width)){\r\n            _this.el.width(width);\r\n        }\r\n        _this._elHeight();\r\n    },\r\n    setWidth:function (width) {\r\n        var _this = this;\r\n        if(isNotEmpty(width)){\r\n            _this.el.width(width);\r\n        }\r\n    },\r\n    /**\r\n     *  初始化组件,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _init\r\n     */\r\n    _init:function(){\r\n        var _this = this;\r\n        if(isNotEmpty(_this.value)) {\r\n            _this.setValue(_this.value);\r\n        }else{\r\n            var initValue= _this.options[\"initValue\"];\r\n            if(isNotEmpty(initValue)){\r\n                _this.setValue(initValue);\r\n                _this.orgiValue = initValue;\r\n            }\r\n        }\r\n\r\n        _this._loadSuccess();\r\n    },\r\n    /**\r\n     *  表单name属性\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @property name\r\n     * @type String\r\n     */\r\n    /**\r\n     *  表单initValue默认值\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @property initValue\r\n     * @type {Object}\r\n     */\r\n    /**\r\n     *  表单中文说明\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @property nameCn\r\n     * @type {String}\r\n     */\r\n    /**\r\n     *  是否必填\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @property required\r\n     * @type {String}\r\n     */\r\n    /**\r\n     *  必填验证提示消息\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @property required-msg\r\n     * @type {String}\r\n     */\r\n    /**\r\n     *  表单模式 1 编辑模式,2 展示模式\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @property  model\r\n     * @type {Number}\r\n     */\r\n    /**\r\n     *  表单验证条件,参照_$.Validate\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @property  validRules\r\n     * @type {JSON}\r\n     */\r\n    /**\r\n     *  表单setValue格式化方法\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @property  setValueFormat\r\n     * @type {Function}\r\n     */\r\n    /**\r\n     *  监控change事件\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @property  onchange\r\n     * @type {Function}\r\n     */\r\n    /**\r\n     *  监控change事件\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @event onchange\r\n     * @param {Event} e 事件对象\r\n     */\r\n\r\n    _attrProps:function(){\r\n        var _this = this;\r\n        var properties = _$.FormItem.superclass._attrProps.call(_this);\r\n        properties.addAll(['name',\"onchange\",'initValue','nameCn',\"required-msg\",\"qtype\",\r\n            {'required':'boolean','immediately':'boolean',model: 'number',validRules:'json',userData:'json',\"setValueFormat\":\"function\",\"returnValue\":\"boolean\"}]);\r\n        return properties;\r\n    },\r\n    _attrOpts:function(){\r\n        var _this = this;\r\n        var opts = _$.FormItem.superclass._attrOpts.call(_this);\r\n        return $.extend(true,opts,{\r\n            model:1,\r\n            returnValue:true,\r\n            immediately:false,\r\n            \"setValueFormat\":function(data,value){\r\n                return value;\r\n            }\r\n        });\r\n    },\r\n    /**\r\n     *  判断组件是否编辑模式,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _isEdit\r\n     */\r\n    _isEdit:function(){\r\n        var _this = this;\r\n        return _this.options.model == _EDITABLE_;\r\n    },\r\n    /**\r\n     *  从组件中获取现取值,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _sync\r\n     */\r\n    _sync:function(){\r\n        var _this = this;\r\n        _this.value =  _this.component.val();\r\n    },\r\n    /**\r\n     *  校验组件,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _validateItem\r\n     */\r\n    _validateItem:function(rule){\r\n        var _this = this;\r\n\r\n        var value = _this.getValue();\r\n        var nameCn = _this.getOption(\"nameCn\");\r\n        var id = _this.id;\r\n        var name = _this.getOption(\"name\");\r\n\r\n\r\n        return  _$.validator.execute(id,name,value,nameCn,rule);\r\n    },\r\n    /**\r\n     *  展示错误信息,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _showErrMsg\r\n     */\r\n    _showErrMsg:function(){\r\n        var _this = this;\r\n        $(\".form_item_valid\",_this.el).html( _this.errMsg.join(\",\"));\r\n        $(\"#validDiv\").append( _this.errMsg.join(\",\"));\r\n        _this._elHeight();\r\n    },\r\n    /**\r\n     *  渲染组件,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _replaceNode\r\n     * @param {String} temp 组件html\r\n     */\r\n    _replaceNode:function(temp){\r\n        var _this = this;\r\n        var source='<div id=\"{{id}}\" >'+ temp +'<div class=\"form_item_valid\"></div><div class=\"form_item_memo\">{{remark}}</div><div style=\"clear:both;\"></div></div>';\r\n\r\n        if(_this._isEdit()){\r\n            source='<div id=\"{{id}}\" >'+ temp +'<div class=\"form_item_valid\"></div><div class=\"form_item_memo\">{{remark}}</div><div style=\"clear:both;\"></div></div>';\r\n        }else{\r\n            source='<div id=\"{{id}}\" >'+ temp +'</div>';\r\n        }\r\n        var template = Handlebars.compile(source);\r\n        var result = template(_this.options);\r\n        var element = $(result);\r\n        _this.el.replaceWith(element);\r\n        _this.el = element;\r\n        _this.el.addClass(_this._uiCls);\r\n        _this.el.addClass(\"FormItem\");\r\n        _this.el.attr(\"componentId\",_this.uid);\r\n    },\r\n    /**\r\n     *  组件返回默认值,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method reset\r\n     */\r\n    reset:function(){\r\n        var _this = this;\r\n        _this.setValue(_this.orgiValue);\r\n    },\r\n    /**\r\n     *  组件设置值,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method setValue\r\n     * @param {Object} value 组件设置值\r\n     * @param {Boolean} change 是否触发onchange事件\r\n     */\r\n    setValue:function(value,change) {\r\n        var _this = this;\r\n        if(isEmpty(change)){\r\n            change = true;\r\n        }\r\n        var _this = this;\r\n        if(isEmpty(value)){\r\n            _this.value = null;\r\n\r\n            if (_this._isEdit()) {\r\n                _this.component.val(\"\");\r\n            } else {\r\n                _this.component.html(\"\");\r\n            }\r\n        }else{\r\n            _this.value = value;\r\n            if (_this._isEdit()) {\r\n                _this.component.val(value);\r\n            } else {\r\n                _this.component.html(value);\r\n            }\r\n        }\r\n\r\n        if(change){\r\n            var event = {};\r\n            event.value = _this.value;\r\n            _this._fire(\"onchange\",event);\r\n        }\r\n    },\r\n    /**\r\n     * 获取设置值,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method getValue\r\n     */\r\n    getValue:function(){\r\n        var _this = this;\r\n        return _this.value;\r\n    },\r\n    /**\r\n     * 组件设置校验状态,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method setValid\r\n     */\r\n    setValid:function(flag){\r\n        var _this = this;\r\n        _this.validState = flag;\r\n\r\n        if(_this.validState){\r\n            _this.errMsg=[];\r\n        }\r\n        this._showErrMsg();\r\n    },\r\n    /**\r\n     * 组件校验,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method validate\r\n     */\r\n    validate:function (rules){\r\n        var _this = this;\r\n        var dtd=$.Deferred();\r\n        if(isNotEmpty(rules) && rules.length >= 0){\r\n            var arr=[];\r\n            rules.each(function(rule){\r\n                arr.push(_this._validateItem(rule))\r\n            });\r\n            $.when.apply(this,arr)\r\n                .done(function(){\r\n                    var v_flag = true;\r\n                    var errMsg = [];\r\n                    for (var i = 0; i < arguments.length; i++) {\r\n                        var res =  arguments[i];\r\n                        var state = res[\"state\"];\r\n                        var info = res[\"info\"];\r\n\r\n                        if(v_flag && !state){\r\n                            v_flag = state;\r\n                            errMsg.add(info);\r\n                        }\r\n                    }\r\n                    var result ={\r\n                        \"flag\": v_flag,\r\n                        \"errMsg\": errMsg\r\n                    };\r\n                    dtd.resolve(result);\r\n                })\r\n                .fail(function(err){\r\n                    dtd.reject(err)\r\n                });\r\n        }else{\r\n            setTimeout(function () {\r\n                var result ={\r\n                    \"flag\": true,\r\n                    \"errMsg\": []\r\n                };\r\n                dtd.resolve(result);\r\n            },50)\r\n        }\r\n        return dtd.promise();\r\n    },\r\n    /**\r\n     * 组件校验,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method isValid\r\n     */\r\n    isValid:function(hiddenFlag){\r\n        var _this = this;\r\n        var dtd=$.Deferred();\r\n        if(!_this._isEdit() || !hiddenFlag  &&  !_this.el.is(\":visible\")){\r\n            return true;\r\n        }\r\n        var validRules =_this.getOption(\"validRules\");\r\n        var required = _this.getOption(\"required\");\r\n\r\n        if(validRules){\r\n            var rules = [];\r\n            if(required == true){\r\n                var required_rule = {};\r\n                required_rule[\"type\"] = \"required\";\r\n                required_rule[\"value\"] = validRules[\"required\"];\r\n                required_rule[\"msg\"] = validRules[\"required-msg\"];\r\n                rules.add(required_rule);\r\n            }\r\n\r\n\r\n            for(var key in validRules){\r\n                if(!key.endWith(\"msg\")){\r\n                    var rule = {};\r\n                    rule[\"type\"] = key;\r\n                    rule[\"value\"] = validRules[key];\r\n                    rule[\"msg\"] = validRules[key + \"-msg\"];\r\n\r\n                    rules.add(rule);\r\n                }\r\n            }\r\n\r\n            $.when(_this.validate(rules))\r\n            .done(function(res){\r\n                var flag = res.flag;\r\n                _this.errMsg = res.errMsg;\r\n                _this.setValid(flag);\r\n                dtd.resolve(flag);\r\n            })\r\n            .fail(function(err){\r\n                dtd.reject(err)\r\n            });\r\n\r\n        }else{\r\n            setTimeout(function () {\r\n                dtd.resolve(true);\r\n            },50)\r\n        }\r\n        return dtd.promise();\r\n    },\r\n    /**\r\n     * 组件获取修改后的值,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method getEditValue\r\n     */\r\n    getEditValue:function(values){\r\n        var _this = this;\r\n        var orgiValue =  _this.orgiValue;\r\n        var current = _this.getValue();\r\n        var key =  _this.id;\r\n        if(isEmpty(orgiValue) && isNotEmpty(current)){\r\n            values[key] = current;\r\n        }else if(isNotEmpty(orgiValue) && isEmpty(current)){\r\n            values[key] = null;\r\n        }else if(isNotEmpty(orgiValue) && isNotEmpty(current) && (orgiValue != current)){\r\n            values[key] = current;\r\n        }\r\n    },\r\n    /**\r\n     * 组件设置模式,\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method setModel\r\n     */\r\n    setModel:function(model){\r\n        var _this = this;\r\n        if(_this.options.model == _SHOW_ && model == _EDITABLE_){\r\n            _this._editModel();\r\n        }else if(_this.options.model == _EDITABLE_ &&  model == _SHOW_){\r\n            _this._showModel();\r\n        }\r\n    },\r\n    /**\r\n     * 为控件绑定事件\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _bindChangeEvents\r\n     */\r\n    _bindEvents:function(){\r\n        var _this = this;\r\n        _this._bindChangeEvents();\r\n    },\r\n    /**\r\n     * 组件绑定onchange事件\r\n     *\r\n     *  @for _$.FormItem\r\n     *  @method _bindChangeEvents\r\n     */\r\n    _bindChangeEvents:function () {\r\n        var _this = this;\r\n        _$.FormItem.superclass._getEvents.call(_this, [\"onchange\"]);\r\n    },\r\n    destroy : function() {\r\n        var _this = this;\r\n        if(_this._isEdit()){\r\n            _this._clearEdit();\r\n        }else{\r\n            _this._clearShow();\r\n        }\r\n        _$.FormItem.superclass.destroy.call(_this);\r\n    }\r\n});\r\n\r\n_$.regPlugins([\"Text\",\"TextArea\"]);"]}